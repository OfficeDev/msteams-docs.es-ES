### YamlMime:Tutorial
title: Compilación de un bot con autenticación sso
metadata:
  title: Compilación de un bot con autenticación sso
  description: En este tutorial, aprenderá a crear un bot con autenticación sso.
  audience: Developer
  level: Beginner
  ms.date: 08/24/2021
  ms.topic: interactive-tutorial
  nextTutorialHref: bots/how-to/authentication/auth-aad-sso-bots.md
  nextTutorialTitle: Obtenga más información sobre la autenticación de bots.
  ms.custom: mvc
  ms.localizationpriority: high
  ms.openlocfilehash: ad26e44baa34d008ee94e693325e142becb83c37
  ms.sourcegitcommit: 5070746e736edb4ae77cd3efcb2ab8bb2e5819a0
  ms.translationtype: MT
  ms.contentlocale: es-ES
  ms.lasthandoff: 06/16/2022
  ms.locfileid: "66123023"
items:
- durationInMinutes: 1
  content: >
    Teams bots son bots conversacionales que ejecutan tareas automatizadas repetitivas realizadas por los usuarios, como el servicio al cliente. El usuario debe iniciar sesión varias veces sin la autenticación de inicio de sesión único (SSO). Con los métodos de autenticación sso, los usuarios no necesitan iniciar sesión en el bot varias veces.


    Un bot se comporta de forma diferente en función de la conversación en la que esté implicado:


    * Los bots en conversaciones de chat de canal y grupo requieren que los usuarios @mention el bot.

    * Los bots en una conversación uno a uno no requieren una @mención. Todos los mensajes enviados por el usuario se enrutan al bot.


    Esta guía paso a paso le ayuda a crear un bot con autenticación sso. Verá la siguiente salida:

     :::image type="content" source="~/assets/images/bots/sbs-desktop-mobile.png" alt-text="Inicio de sesión móvil en el bot" border="true":::
- title: Requisitos previos
  durationInMinutes: 1
  content: "Asegúrese de instalar las siguientes herramientas y configurar el entorno de desarrollo:  \n\n* [Versión más reciente de ngrok](https://ngrok.com/download) o cualquier solución de tunelización equivalente\n\n  > [!NOTE]\n  > Después de descargar ngrok, regístrese e instale [authtoken](https://ngrok.com/download).\n\n* [Versión más reciente de Visual Studio](https://visualstudio.microsoft.com/downloads/)\n\nAsegúrese de tener las cuentas siguientes y de configurar el entorno de desarrollo: \n\n* [Cuenta de Microsoft](https://teams.microsoft.com/)\n\n  > [!TIP]\n  > Asegúrese de que la cuenta de Microsoft Teams no sea una cuenta de invitado.\n\n* [Microsoft 365 cuenta de desarrollador](https://developer.microsoft.com/en-us/microsoft-365/dev-program) o acceso a Teams cuenta con los permisos adecuados para instalar una aplicación  \n\n## <a name=\"set-up-your-teams-development-tenant\"></a>Configuración del inquilino de desarrollo de Teams\n\n   Un **inquilino** es como un espacio o un contenedor en el que chatea, comparte archivos y ejecuta reuniones para su organización en Teams. También puede transferir localmente y probar la aplicación.\n\n### <a name=\"check-for-sideloading-option\"></a>Comprobación de la opción de instalación local\n\n   Después de crear la aplicación, debe cargarla en Teams sin distribuirla. Esto se conoce como transferencia local. Inicie sesión en su cuenta de Microsoft 365 para ver esta opción.\n\n   > [!NOTE]\n   > La instalación local es necesaria para obtener una vista previa y probar aplicaciones en Teams entorno local. Habilite la instalación local para obtener una vista previa y probar la aplicación en Teams localmente.\n\n   ¿Ya tiene un inquilino y tiene acceso de administrador? ¡Vamos a comprobar si realmente lo haces!\n\nPara comprobar la transferencia local de aplicaciones en Teams:\n\n1. En el cliente Teams, seleccione **Tienda**.\n1. Seleccione **Administrar las aplicaciones**.\n1. Seleccione **Publicar una aplicación**.\n1. Busque la opción para **Upload una aplicación personalizada**. Si ve la opción, la instalación de prueba de aplicaciones está habilitada.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/upload-custom-app1.png\" alt-text=\"Ilustración que muestra la opción de cargar una aplicación personalizada en Teams.\":::\n\n    > [!NOTE]\n    > Póngase en contacto con Teams administrador si no tiene la opción de cargar una aplicación personalizada.\n\n### <a name=\"create-a-free-teams-developer-tenant-optional\"></a>Creación de un inquilino para desarrolladores de Teams gratis (opcional)\n\nSi no tiene una cuenta de desarrollador Teams, puede obtenerla de forma gratuita. ¡Únete al programa para desarrolladores de Microsoft 365!\n\n1. Vaya al [programa para desarrolladores de Microsoft 365](https://developer.microsoft.com/microsoft-365/dev-program).\n1. Seleccione **Unirse ahora** y siga las instrucciones en pantalla.\n1. Seleccione **Configurar suscripción E5** en la pantalla de bienvenida.\n1. Configurar la cuenta de administrador. Una vez finalizada, se muestra la pantalla siguiente.\n\n      :::image type=\"content\" source=\"~/assets/images/teams-toolkit-v2/prerequisites/microsoft-365.png\" alt-text=\"Microsoft\" border=\"true\":::\n\n1. Inicie sesión en Teams con la nueva cuenta de administrador. Ahora debe tener la **opción Upload una aplicación personalizada**.\n"
- title: Creación y registro del bot
  durationInMinutes: 5
  content: "Los pasos siguientes le ayudan a crear y registrar el bot en Azure Portal:\n\n1. Cree un recurso de Bot de Azure para registrar el bot con Azure Bot Service.\n1. Cree un secreto de cliente para habilitar la autenticación sso del bot.\n1. Agregue Teams canal para implementar el bot.\n1. Use ngrok para crear un túnel a los puntos de conexión del servidor web.\n1. Agregue el punto de conexión de mensajería al túnel ngrok que ha creado.\n\n**Para crear un recurso de Bot de Azure**\n\n1. Vaya a [Azure Portal](https://portal.azure.com/). Puede solicitarle que inicie sesión con sus credenciales de cuenta microsoft.\n\n1. Elija **Crear un recurso**.\n\n   :::image type=\"content\" source=\"~/assets/images/bots/Createaresource.png\" alt-text=\"Crear recurso\" border=\"true\":::\n\n1. En el cuadro de búsqueda, escriba **Bot de Azure**.\n\n   :::image type=\"content\" source=\"~/assets/images/bots/searchazurebot.png\" alt-text=\"Crear recurso\" border=\"true\":::\n\n1. Seleccione **Introducir**.\n\n1. Seleccione **Bot de Azure**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/selectazurebot.png\" alt-text=\"Selección de Azure Bot\" border=\"true\":::\n\n1. Seleccione **Crear**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/createazurebot.png\" alt-text=\"Creación de una tarjeta de bot de Azure\" border=\"true\":::\n\n   Aparece la página Crear un bot de Azure.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/azurebotpage.png\" alt-text=\"Página del bot de Azure\" border=\"true\":::\n\n1. Escriba los detalles siguientes para crear un bot de Azure.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/Azurebotcreate.png\" alt-text=\"Creación de un bot de Azure de recursos\" border=\"true\":::\n\n    1. Escriba el nombre de identificador de bot necesario en **Identificador de bot** y es un identificador único para el bot.\n\n    1. Seleccione su **Suscripción** en la lista desplegable.\n\n    1. Seleccione **el grupo de recursos** en la lista desplegable que desea aprovisionar para la aplicación de bot.\n    \n     \n       También puede crear un nuevo grupo de recursos siguiendo estos pasos:\n\n          1. Para crear un nuevo grupo de recursos, seleccione **Crear nuevo** > escriba el nombre del recurso > seleccione **Aceptar**.\n\n               :::image type=\"content\" source=\"~/assets/images/bots/newresourcecreation.png\" alt-text=\"Creación de nuevos recursos\" border=\"true\":::\n\n          1. Si ha creado un nuevo grupo de recursos, seleccione la ubicación necesaria en la lista desplegable **Nueva ubicación del grupo de recursos** .\n    \n               :::image type=\"content\" source=\"~/assets/images/bots/newresource.png\" alt-text=\"Nuevo recurso\" border=\"true\":::\n\n    1. Seleccione **Tipo de aplicación** como **multiinquilino**.\n\n        :::image type=\"content\" source=\"~/assets/images/bots/Review-Create.png\" alt-text=\"Revisar crear\" border=\"true\":::\n\n    1. En la sección **Microsoft App ID (Id. de aplicación de Microsoft** ), está seleccionada la opción **Create new Microsoft App ID (Crear nuevo identificador de aplicación de Microsoft** ) de forma predeterminada.\n\n       Puede seleccionar **Usar registro de aplicación existente** y escribir Id. de **aplicación existente** y **Contraseña de aplicación existente**, o bien seleccionar **Crear nuevo identificador de aplicación de Microsoft**.\n\n       > [!NOTE]\n       > No puede crear más de un bot con el mismo **identificador de aplicación de Microsoft**.\n\n    1. Seleccione **Revisar y crear**.\n\n1. Una vez superada la validación, seleccione **Crear**.\n\n     :::image type=\"content\" source=\"~/assets/images/bots/validationpass.png\" alt-text=\"Paso de validación\" border=\"true\":::\n\n   El servicio de bot tarda unos minutos en aprovisionarse y aparece la página siguiente:\n\n     :::image type=\"content\" source=\"~/assets/images/bots/provisionpage.png\" alt-text=\"Página Aprovisionar\" border=\"true\":::\n\n1. Seleccione **Ir a recursos**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/gotoresource.png\" alt-text=\"Recurso\" border=\"true\":::\n\n   Se crea el bot de Azure y puede ver el **grupo de recursos** y el **identificador de suscripción** en el bot de Azure.\n\n     :::image type=\"content\" source=\"~/assets/images/bots/Azurebotresource.png\" alt-text=\"Recurso de bot de Azure creado\" border=\"true\":::\n\n**Para crear un secreto de cliente**\n\n Siga estos pasos para crear el secreto de cliente:\n\n1. En el panel izquierdo, seleccione **Configuración**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/selectconfigure.png\" alt-text=\"Seleccione Configurar.\" border=\"true\":::\n\n   > [!Important]\n   > Guarde el **identificador de aplicación de Microsoft** o el **identificador de cliente** para futuras referencias.\n\n1. Junto a **Id. de aplicación de Microsoft**, seleccione **Administrar**.\n\n      :::image type=\"content\" source=\"~/assets/images/bots/MicrosoftAppID.png\" alt-text=\"Id. de aplicación de Microsoft\" border=\"true\":::\n\n1. En la sección **Secretos de cliente** , seleccione **Nuevo secreto de cliente**.\n\n      :::image type=\"content\" source=\"~/assets/images/bots/newclientsecret.png\" alt-text=\"Nuevo secreto de cliente\" border=\"true\":::\n\n   Aparece **la ventana Agregar un secreto de cliente** .\n\n1. Escriba **Descripción**.\n\n1. Seleccione **Agregar**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/addclientsecret.png\" alt-text=\"Agregar secreto de cliente a la aplicación\" border=\"true\":::\n\n1. En la columna **Valor** , seleccione **Copiar en el Portapapeles**. \n\n    :::image type=\"content\" source=\"~/assets/images/bots/valueclientsecret.png\" alt-text=\"Valor del secreto de cliente\" border=\"true\":::\n\n   > [!Important]\n   > Guarde el valor **secretos de cliente** o la contraseña de la aplicación para futuras referencias.\n   \n**Adición de bot al canal de Teams**\n\n1. Seleccione **Inicio**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/selecthome.png\" alt-text=\"Página principal\" border=\"true\":::\n\n1. Seleccione el bot en **Recursos recientes**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/selectrecentresources.png\" alt-text=\"Selección de recursos recientes\" border=\"true\":::\n\n1. Seleccione **Canales** en el panel izquierdo.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/selectchannel.png\" alt-text=\"Seleccionar reciente\" border=\"true\":::\n\n1. Seleccione **Microsoft Teams** <img src=\"~/assets/images/bots/teamsicon.png\" alt=\"Teams icon\" width=\"20\"/>. \n\n    :::image type=\"content\" source=\"~/assets/images/bots/selectmicrosoftteams.png\" alt-text=\"Seleccione Microsoft Teams\" border=\"true\":::\n\n1. Active la casilla para aceptar los **Términos de servicio**.\n\n1. Seleccione **Aceptar**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/Terms-of-service.png\" alt-text=\"Términos\" border=\"true\":::\n\n1. Seleccione **Aplicar**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/apply.png\" alt-text=\"Apply\" border=\"true\":::\n\n**Para crear un túnel para el servidor web local**\n\nUse ngrok para crear un túnel para los puntos de conexión HTTPS disponibles públicamente del servidor web en ejecución local. Ejecute el siguiente comando en ngrok:\n\n   ```bash\n   ngrok http -host-header=localhost 3978\n   ```\n   > [!TIP]\n   > Si encuentra **ERR_NGROK_4018**, siga los pasos que se muestran en el símbolo del sistema para registrarse y autenticar ngrok. A continuación, ejecute el comando `ngrok http -host-header=localhost 3978`.\n\n**Para agregar un punto de conexión de mensajería**\n\n1. En ngrok, copie la dirección URL HTTPS.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/ngrokURL.png\" alt-text=\"ngrok HTTPS URL\" border=\"true\":::\n\n    > [!NOTE]\n    > La dirección URL HTTPS de ngrok es el nombre de dominio completo.\n    > `WebAppDomain` es un nombre de dominio completo que no incluye `https://` en él.\n\n1. Volver al Azure Portal.\n\n1. En **Configuración** del bot de Azure que ha creado, seleccione **Configuración**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/selectconfiguration.png\" alt-text=\"Seleccionar configuración\" border=\"true\":::\n\n1. En **Punto de conexión de mensajería**, use la dirección URL HTTPS disponible en ngrok y, al final de la dirección URL, agregue **/api/messages**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/messagingURL.png\" alt-text=\"Punto de conexión de mensajería\" border=\"true\":::\n\n1. Seleccione **Aplicar**.\n\n    Ha configurado correctamente un bot en Azure Bot Service.\n"
- title: Configuración del inicio de sesión único para el bot
  durationInMinutes: 5
  content: "**Para agregar el URI de redirección al recurso del bot de Azure**\n\n1. Haga clic en **Administrar**.\n\n     :::image type=\"content\" source=\"~/assets/images/bots/MicrosoftAppID.png\" alt-text=\"Administrar identificador de aplicación\" border=\"true\":::\n\n1. En el panel izquierdo, seleccione **Autenticación**.\n\n     :::image type=\"content\" source=\"~/assets/images/bots/selectauthentication.png\" alt-text=\"Seleccione Autenticación.\" border=\"true\":::\n\n1. En **Configuraciones de plataforma**, seleccione **Agregar una plataforma** para elegir la plataforma en la que desea hospedar la aplicación de bot. \n\n    :::image type=\"content\" source=\"~/assets/images/bots/addaplatform.png\" alt-text=\"Agregar una plataforma\" border=\"true\":::\n\n1. Para este tutorial, seleccione **Web**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/selectweb.png\" alt-text=\"Seleccionar web\" border=\"true\":::\n    \n1. Escriba **URI de redireccionamiento** como `https://token.botframework.com/.auth/web/redirect` y este es el URI en el que Azure AD enviará la respuesta para la autenticación de usuario.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/redirectURI1.png\" alt-text=\"URI de redireccionamiento 1\" border=\"true\":::\n\n1. Habilite **la concesión implícita y los flujos híbridos** seleccionando las casillas siguientes:\n\n    * **Tokens de identificador**\n    * **Tokens de acceso**\n\n1. Seleccione **Configurar**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/selectimplictgrant.png\" alt-text=\"Seleccione Concesión implicta.\" border=\"true\":::\n\n    El URI de redirección se agrega al recurso del bot de Azure.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/redirectURIadded.png\" alt-text=\"URI de redireccionamiento agregado al recurso del bot\" border=\"true\":::\n\n**Para exponer el punto de conexión de API**\n\n1. En el panel izquierdo, seleccione **Exponer una API**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/exposeanapi.png\" alt-text=\"Exponer una API\" border=\"true\":::\n\n1. Seleccione **Establecer**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/appidURI.png\" alt-text=\"URI del identificador de aplicación\" border=\"true\":::\n\n1. Use el URI del identificador de aplicación que se muestra y anexe **api://botid al** principio del URI.\n\n1. Seleccione **Guardar**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/exposeAPI.png\" alt-text=\"Exponer una API\" border=\"true\":::\n\n   > [!Important]\n   > Guarde el **URI del identificador de aplicación** para futuras referencias.\n\n1. Seleccione **Agregar un ámbito**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/Addascope.png\" alt-text=\"Exponer una API\" border=\"true\":::\n\n   Aparece agregar un panel de ámbito.\n\n1. Escriba los detalles para configurar el ámbito.    \n\n     :::image type=\"content\" source=\"~/assets/images/bots/addscope.png\" alt-text=\"Adición de un ámbito a la aplicación\" border=\"true\":::\n\n      1. Escriba `access_as_user` como **nombre del ámbito**.\n\n         > [!NOTE]\n         > El **nombre del ámbito** debe coincidir con el URI **del identificador de aplicación** con `/access_as_user` anexado al final.\n\n      1. Establezca **Quién puede dar su consentimiento?** en `Admins and users`.\n\n      1. Para configurar las solicitudes de consentimiento del administrador y del usuario con los valores adecuados para `access_as_user` el ámbito, proporcione la siguiente información en los campos:</br>\n\n          * Escriba `Teams can access the user’s profile` como **Administración nombre para mostrar del consentimiento**.\n\n          * Escriba `Allows Teams to call the app’s web APIs as the current user` como **Administración descripción del consentimiento**.\n\n          * Escriba `Teams can access the user profile and make requests on the user’s behalf` como **Nombre para mostrar del consentimiento del usuario**.\n\n          * Escriba `Enable Teams to call this app’s APIs with the same rights as you have` como **Descripción del consentimiento del usuario**.\n\n      1. Asegúrese de que **Estado** se establece en **Habilitado**.\n\n1. Seleccione **Agregar ámbito** para guardar.\n\n   El URI del identificador de aplicación se crea con **el nombre del ámbito**.\n\n      :::image type=\"content\" source=\"~/assets/images/bots/ExposeAPIandaddscope.png\" alt-text=\"API expuesta y ámbito agregado\" border=\"true\":::\n\n1. En la sección **Aplicaciones cliente autorizadas**, identifique las aplicaciones que quiere autorizar en la aplicación web de la aplicación.\n\n1. Seleccione **Agregar una aplicación cliente**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/addaclientapplication.png\" alt-text=\"Agregar una aplicación cliente\" border=\"true\":::\n\n   Aparece agregar un panel de aplicación cliente.\n\n1. Escriba el id. de cliente para el escritorio y la aplicación web por separado que desea autorizar. Es el identificador de aplicación de la aplicación cliente que desea autorizar.\n   \n   |**Id. de cliente**|**Para autorizar**|\n   |--------|-------------|\n   | `1fec8e78-bce4-4aaf-ab1b-5451cc387264` | Teams aplicación móvil o de escritorio |\n   | `5e3ce6c0-2b1f-4285-8d4b-75ee78787346` | Teams aplicación web |\n\n1. Seleccione **Ámbitos autorizados** para determinar qué tipo de token devolverá el servicio.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/add-desktop-app.png\" alt-text=\"Agregar aplicación cliente a la aplicación\" border=\"true\":::\n   \n1. Seleccione **Agregar aplicación**.\n\n    En la imagen siguiente se muestra el identificador de cliente:\n\n      :::image type=\"content\" source=\"~/assets/images/bots/clientapps.png\" alt-text=\"Aplicaciones cliente\" border=\"true\":::\n\n**Configuración de permisos de Graph**\n\n1. En el panel izquierdo, seleccione **Permisos de API**.\n\n      :::image type=\"content\" source=\"~/assets/images/bots/selectapipermissions.png\" alt-text=\"Seleccionar permisos de API\" border=\"true\":::\n\n   > [!NOTE]\n   > Los usuarios deben dar su consentimiento a los permisos de API solo si la aplicación de bot está registrada en un inquilino diferente.\n\n1. Seleccione **Agregar un permiso**\n\n    :::image type=\"content\" source=\"~/assets/images/bots/configure-permission.png\" alt-text=\"Permisos de usuario de API\" border=\"true\":::\n\n   Aparece la página Solicitar permiso de API:\n\n1. Seleccione **Microsoft Graph**.\n    \n    :::image type=\"content\" source=\"~/assets/images/bots/selectmicrosoftgraph.png\" alt-text=\"Seleccione Microsoft Graph\" border=\"true\":::\n\n1. Seleccione **Permisos delegados**\n\n    :::image type=\"content\" source=\"~/assets/images/bots/select-graph-permissions.png\" alt-text=\"Seleccionar permisos de Graph\" border=\"true\":::\n\n1. Seleccione **Permiso User.Read** en la lista desplegable **Usuario** .\n\n1. Seleccione **Agregar permisos**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/userread.png\" alt-text=\"Lectura del usuario\" border=\"true\":::\n\n**Para actualizar el manifiesto**\n\n1. En el panel izquierdo, seleccione **Manifiesto**.\n\n     :::image type=\"content\" source=\"~/assets/images/bots/selectmanifest.png\" alt-text=\"Seleccionar manifiesto\" border=\"true\":::\n\n1. Asegúrese de que el elemento de configuración está establecido en **“accessTokenAcceptedVersion”: 2**. Si no es así, cambie su valor a **2** y seleccione **Guardar**.\n\n   > [!NOTE]\n   > Si ya está probando el bot en Teams, debe cerrar sesión desde esta aplicación y Teams. A continuación, vuelva a iniciar sesión para ver este cambio.</br>\n    \n      :::image type=\"content\" source=\"~/assets/images/bots/update-manifest.png\" alt-text=\"Actualizar manifiesto\" border=\"true\":::\n\n**Para configurar la conexión de Bot Service**\n\n1. En **la página Configuración**, seleccione **Agregar conexión de OAuth Configuración**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/selectconfiguration1.png\" alt-text=\"Seleccionar configuración1\" border=\"true\":::\n\n    :::image type=\"content\" source=\"~/assets/images/bots/botserviceconnection.png\" alt-text=\"conexión Bot Service\" border=\"true\":::\n\n1. En la página **Nueva configuración de conexión** , escriba los detalles siguientes:\n\n    | Field | Valor o descripción |\n    | ----- | ----- |\n    | Nombre | Escriba el nombre de la nueva configuración de conexión. Puede usar el nombre en la configuración del código de bot service. |\n    | Proveedor de servicios | Seleccione **Azure Active Directory V2**. |\n    | Id. de cliente | Se guardó anteriormente como **su identificador de aplicación de Microsoft**. |\n    | Secreto de cliente | Se guardó anteriormente como **Valor** del identificador de secreto de cliente. |\n    | Dirección URL de Exchange de token | Use la **dirección URL del identificador de aplicación** obtenida anteriormente al exponer el punto de conexión de API. |\n    | Identificación del inquilino | Escriba **común**. |\n    | Scopes | Escriba **User.Read** y agregue también todos los **ámbitos** necesarios al especificar permisos para las API de nivel inferior. |\n\n1. Seleccione **Guardar**.\n\n1. Seleccione **Aplicar**.\n\n   Ahora ha configurado el inicio de sesión único para el bot.\n"
- title: Configuración y ejecución del ejemplo de bot
  durationInMinutes: 1
  content: "1. Abra **Visual Studio**.\n\n1. Seleccione **Clonar un repositorio**.\n\n1. En la **ubicación del repositorio**, escriba `https://github.com/OfficeDev/Microsoft-Teams-Samples.git`. Asegúrese de tener en cuenta la **ruta de acceso** donde se clona el repositorio.\n\n1. Vaya a **Archivo** > **abierto** >  **Project/Solución**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/project-solution.png\" alt-text=\"conexión Bot Service\" border=\"true\":::\n\n1. Seleccione **BotSSOCSharp.csproj file (Archivo BotSSOCSharp.csproj****) en csharp_dotnetcore** carpeta.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/filepath.png\" alt-text=\"Ruta de acceso del archivo\" border=\"true\":::\n\n1. Abra el archivo **appsettings.json** .\n\n1. Actualice la configuración **de appsettings.json** para que el bot use `MicrosoftAppId` y `MicrosoftAppPassword`. Use el nombre de conexión de OAuth como **nombre de conexión**.\n\n    > [!NOTE]\n    > Puede obtenerlo en la `MicrosoftAppId` página Configuración del bot. `MicrosoftAppPassword` es el valor del identificador de secreto de cliente que guardó anteriormente en Azure.\n\n     :::image type=\"content\" source=\"~/assets/images/bots/appsettingsjson.png\" alt-text=\"Appsettings json\" border=\"true\":::\n\n1. Seleccione **F5**  para ejecutar el proyecto.\n\n1. Seleccione **Sí** si aparece el siguiente cuadro de diálogo:\n\n    :::image type=\"content\" source=\"~/assets/images/bots/certificate.png\" alt-text=\"Ca\" border=\"true\":::\n\n   Se abre una página web con un mensaje **Bot is Ready (El bot está listo).**\n\n    :::image type=\"content\" source=\"~/assets/images/bots/yourbot.png\" alt-text=\"Ca\" border=\"true\":::\n    \n    <br>\n\n    <details>\n\n    <summary><b>Solución de problemas</b></summary>\n\n    Si recibe el error **No se puede encontrar el paquete** , siga estos pasos:\n\n    1.  Vaya a **Herramientas** >  **NuGet Administrador de paquetes** >  **Administrador de paquetes Configuración**.\n    1.  En la ventana **Opciones** que aparece, seleccione **NuGet Administrador de paquetes** >  **Paquetar orígenes**.\n    1.  Seleccione **Agregar**.\n    1.  En **Nombre**, escriba `nuget.org` y, en **Origen**, escriba `https://api.nuget.org/v3/index.json`.\n    1.  Seleccione **Actualizar** y **Aceptar**.\n    1.  Recompile el proyecto.\n    <br>\n\n    </details>\n"
- title: Configuración y ejecución de la aplicación Teams
  durationInMinutes: 2
  content: "1. En Visual Studio, abra **la carpeta appPackage**.\n\n1. Abra el archivo **manifest.json** .\n\n1. Reemplace todas las ocurrencias de **{TODO: MicrosoftAppId}** por el identificador de **aplicación de Microsoft** del bot.\n\n1. En el repositorio clonado, vaya a **bot-conversation-sso-quickstart > csharp_dotnetcore > carpeta appPackage** .\n\n1. Cree un .zip con los siguientes archivos presentes en la carpeta **Manifiesto** : \n   * manifest.json\n   * icon-outline.png\n   * icon-color.png\n\n    :::image type=\"content\" source=\"~/assets/images/bots/manifest.png\" alt-text=\"Manifiesto\" border=\"true\":::\n\n1. Vaya a Teams cliente.\n1. Seleccione **Almacenar**.\n1. Seleccione **Administrar las aplicaciones**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/manage-your-app.png\" alt-text=\"Administrar la aplicación\" border=\"true\":::\n\n1. Seleccione **Cargar una aplicación personalizada**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/upload-custom-app.png\" alt-text=\"Cargar aplicación personalizada\" border=\"true\":::\n\n1. Seleccione **Abrir** para cargar el archivo .zip que ha creado en la carpeta **Manifiesto** .\n\n    :::image type=\"content\" source=\"~/assets/images/bots/open-app.png\" alt-text=\"Abrir aplicación\" border=\"true\":::\n\n1. Seleccione **Agregar** para agregar el bot de conversación al chat.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/add-conversation-bot.png\" alt-text=\"Agregar bot de conversación\" border=\"true\":::\n\n    Puede interactuar con el bot enviándole un mensaje. El bot intercambia un token de SSO y llama a la Graph API en su nombre. Mantiene la sesión iniciada a menos que envíe un mensaje para **cerrar la sesión**.\n\n1. Envíe un mensaje al bot. El bot de conversación pide consentimiento por primera vez.\n\n1. Seleccione **Continuar** para conceder permisos a Teams cliente para acceder al bot.\n\n     :::image type=\"content\" source=\"~/assets/images/bots/sbsdesktop-mobile-consent-request1.png\" alt-text=\"Permisos para bot\" border=\"true\":::\n    \n    > [!NOTE]\n    > Ahora ha configurado el inicio de sesión único con la aplicación de bot y es la única vez que tendrá que dar su consentimiento.\n\n1. Para el dispositivo móvil, seleccione **Aceptar** para los **permisos solicitados**.\n\n    > [!NOTE]\n    > Ahora ha configurado el inicio de sesión único con la aplicación de bot en dispositivos móviles y es el único momento en que tendrá que dar su consentimiento.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/sbsdesktop-mobile-consent-request.png\" alt-text=\"Inicio de sesión móvil en el bot\" border=\"true\":::\n"
- title: Desafío completo
  durationInMinutes: 1
  content: >
    ¿Se te ocurrió algo como esto?

     :::image type="content" source="~/assets/images/bots/sbs-desktop-mobile.png" alt-text="Inicio de sesión móvil en el bot" border="true":::
- content: Ha completado el tutorial para empezar a compilar un bot con autenticación sso.
