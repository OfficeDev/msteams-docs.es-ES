---
title: Llamadas de medios en tiempo real y reuniones en línea con Microsoft Teams
description: Comprenda los conceptos clave de Building bot que pueden realizar llamadas de audio y vídeo en tiempo real y reuniones en línea.
keywords: 'secuencia de vídeo de audio secuencia de vídeo llamada de audio y vídeo llamada a medios en tiempo real: medios hospedados en el servicio de medios hospedados por la aplicación'
ms.openlocfilehash: 0ec99d1caa8810d292170c7c70a1518de7301873
ms.sourcegitcommit: 4329a94918263c85d6c65ff401f571556b80307b
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 02/01/2020
ms.locfileid: "41675873"
---
# <a name="real-time-media-calls-and-meetings-with-microsoft-teams"></a><span data-ttu-id="f7044-104">Llamadas de medios en tiempo real y reuniones con Microsoft Teams</span><span class="sxs-lookup"><span data-stu-id="f7044-104">Real-time media calls and meetings with Microsoft Teams</span></span>

<span data-ttu-id="f7044-105">La plataforma de medios en tiempo real permite que los bots interactúen con las llamadas y las reuniones de Microsoft Teams mediante el uso compartido de voz, vídeo y pantalla en tiempo real.</span><span class="sxs-lookup"><span data-stu-id="f7044-105">The Real-time Media Platform enables bots to interact with Microsoft Teams calls and meetings using real-time voice, video, and screen sharing.</span></span> <span data-ttu-id="f7044-106">Se trata de una función avanzada que permite al robot enviar y recibir contenido de voz y vídeo *por trama*.</span><span class="sxs-lookup"><span data-stu-id="f7044-106">This is an advanced capability which allows the bot to send and receive voice and video content *frame by frame*.</span></span> <span data-ttu-id="f7044-107">El bot tiene acceso "sin procesar" a las secuencias multimedia de voz, vídeo y uso compartido de la pantalla.</span><span class="sxs-lookup"><span data-stu-id="f7044-107">The bot has "raw" access to the voice, video, and screen sharing media streams.</span></span> <span data-ttu-id="f7044-108">(Bots que procesan los propios medios se llaman bots _de medios hospedados_ por la aplicación, en lugar de los bots de _medios hospedados por servicios_ más sencillos que se basan en la plataforma de medios en tiempo real para todo el procesamiento de medios).</span><span class="sxs-lookup"><span data-stu-id="f7044-108">(Bots which process media themselves are called _application-hosted media_ bots, as opposed to simpler _service-hosted media_ bots that rely on the Real-time Media platform for all media processing.)</span></span>

<span data-ttu-id="f7044-109">Por ejemplo, en una llamada de 1:1 con un bot, a medida que el usuario habla, el bot recibirá 50 fotogramas de audio por segundo, con cada fotograma que contenga 20 milisegundos (MS) de audio.</span><span class="sxs-lookup"><span data-stu-id="f7044-109">For example, in a 1:1 call with a bot, as the user speaks, the bot will receive 50 audio frames per second, with each frame containing 20 milliseconds (ms) of audio.</span></span> <span data-ttu-id="f7044-110">Un bot? o de medios hospedado en la aplicación puede realizar el reconocimiento de voz en tiempo real a medida que se reciben las tramas de audio, en lugar de tener que esperar una grabación después de que el usuario haya dejado de hablar.</span><span class="sxs-lookup"><span data-stu-id="f7044-110">An application-hosted media bot can perform real-time speech recognition as the audio frames are received, rather than having to wait for a recording after the user has stopped speaking.</span></span> <span data-ttu-id="f7044-111">El bot también puede enviar y recibir vídeo de alta definición, incluido el contenido de uso compartido de pantalla basado en el vídeo.</span><span class="sxs-lookup"><span data-stu-id="f7044-111">The bot can also send and receive high-definition-resolution video, including video-based screen sharing content.</span></span>

<span data-ttu-id="f7044-112">La plataforma proporciona una API similar a un socket para que el bot envíe y reciba medios, y controla la codificación y descodificación en tiempo real de los paquetes de audio/vídeo mediante códecs como seda y G. 722 para audio y H. 264 para vídeo.</span><span class="sxs-lookup"><span data-stu-id="f7044-112">The platform provides a simple socket-like API for the bot to send and receive media, and handles the real-time encoding and decoding of audio/video packets using codecs such as SILK and G.722 for audio and H.264 for video.</span></span> <span data-ttu-id="f7044-113">La plataforma también administra todo el cifrado y descifrado de paquetes de medios y la transmisión de la red de paquetes, por lo que el bot solo tiene que preocuparse del contenido real de audio y vídeo.</span><span class="sxs-lookup"><span data-stu-id="f7044-113">The platform also handles all media packet encryption/decryption and packet network transmission automatically, so the bot just needs to concern itself with the actual audio/video content.</span></span> <span data-ttu-id="f7044-114">Un bot? a de medios en tiempo real puede participar en llamadas de 1:1, así como en reuniones con varios participantes.</span><span class="sxs-lookup"><span data-stu-id="f7044-114">A real-time media bot may participate in 1:1 calls as well as meetings with multiple participants.</span></span>

<span data-ttu-id="f7044-115">En este artículo se presentan conceptos clave relacionados con la creación de un bot que puede realizar llamadas de audio y vídeo en tiempo real con Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="f7044-115">This article introduces key concepts related to building a bot that can conduct real-time audio/video calls with Microsoft Teams.</span></span>

## <a name="media-session"></a><span data-ttu-id="f7044-116">Sesión de medios</span><span class="sxs-lookup"><span data-stu-id="f7044-116">Media session</span></span>

<span data-ttu-id="f7044-117">Cuando un bot? o de medios en tiempo real responde a una llamada entrante o se une a una reunión de Microsoft Teams, debe declarar qué modalidades tiene previsto admitir.</span><span class="sxs-lookup"><span data-stu-id="f7044-117">When a real-time media bot answers an incoming call or joins a Microsoft Teams meeting, it must declare what modalities it intends to support.</span></span> <span data-ttu-id="f7044-118">Para cada modalidad admitida, el bot declara si puede enviar y recibir medios, recibir solo o enviar sólo.</span><span class="sxs-lookup"><span data-stu-id="f7044-118">For each supported modality, the bot declares whether it can send and receive media, receive only, or send only.</span></span> <span data-ttu-id="f7044-119">Por ejemplo, un bot diseñado para controlar las llamadas de 1:1 Teams puede desear enviar y recibir audio, pero solo *Enviar* vídeo (ya que no es necesario recibir el vídeo del autor de la llamada).</span><span class="sxs-lookup"><span data-stu-id="f7044-119">For example, a bot designed to handle 1:1 Teams calls may wish to both send and receive audio, but only *send* video (as it does not need to receive the video of the caller).</span></span> <span data-ttu-id="f7044-120">El conjunto de modalidades de audio y vídeo establecidas entre el bot y el autor de la llamada o la reunión de Microsoft Teams se denomina la **sesión de medios**.</span><span class="sxs-lookup"><span data-stu-id="f7044-120">The set of audio and video modalities established between the bot and the Teams caller or meeting is called the **media session**.</span></span>

<span data-ttu-id="f7044-121">Se admiten dos tipos de modalidades de vídeo: el **vídeo principal** y **el uso compartido de pantalla basado en vídeo**.</span><span class="sxs-lookup"><span data-stu-id="f7044-121">Two types of video modalities are supported: **main video** and **video-based screen sharing**.</span></span> <span data-ttu-id="f7044-122">El vídeo principal se usa para transportar el vídeo desde la cámara web de un usuario.</span><span class="sxs-lookup"><span data-stu-id="f7044-122">Main video is used to transport the video from a user's webcam.</span></span> <span data-ttu-id="f7044-123">La pantalla compartida basada en vídeo permite al usuario compartir su pantalla como una secuencia de vídeo.</span><span class="sxs-lookup"><span data-stu-id="f7044-123">Video-based screen sharing allows a user to share his or her screen as a video stream.</span></span> <span data-ttu-id="f7044-124">La plataforma permite a un bot enviar o recibir *ambos* tipos de vídeo.</span><span class="sxs-lookup"><span data-stu-id="f7044-124">The platform allows a bot to send and/or receive *both* video types.</span></span>

<span data-ttu-id="f7044-125">Cuando se une a una reunión de Microsoft Teams, un bot puede recibir varias secuencias de vídeo principales a la vez, hasta 10 por sesión de medios.</span><span class="sxs-lookup"><span data-stu-id="f7044-125">When joined to a Teams meeting, a bot can receive multiple main video streams simultaneously — up to 10 per media session.</span></span> <span data-ttu-id="f7044-126">Esto permite que el bot "vea" más de un participante en la reunión.</span><span class="sxs-lookup"><span data-stu-id="f7044-126">This allows the bot to "see" more than one participant in the meeting.</span></span>

## <a name="frames-and-frame-rate"></a><span data-ttu-id="f7044-127">Velocidad de fotogramas y fotogramas</span><span class="sxs-lookup"><span data-stu-id="f7044-127">Frames and frame rate</span></span>

<span data-ttu-id="f7044-128">Un robot de medios en tiempo real interactúa directamente con las modalidades de audio y vídeo de una sesión de medios.</span><span class="sxs-lookup"><span data-stu-id="f7044-128">A real-time media bot interacts directly with the audio and video modalities of a media session.</span></span> <span data-ttu-id="f7044-129">Esto significa que el bot está enviando o recibiendo medios como una secuencia de **Marcos**, donde cada fotograma representa una unidad de contenido.</span><span class="sxs-lookup"><span data-stu-id="f7044-129">This means the bot is sending and/or receiving media as a sequence of **frames**, where each frame represents a unit of content.</span></span> <span data-ttu-id="f7044-130">Un segundo de audio puede transmitirse como una secuencia de 50 fotogramas, con cada fotograma que contenga 20 milisegundos (MS), 1/50 veces de segundo, de contenido de voz.</span><span class="sxs-lookup"><span data-stu-id="f7044-130">One second of audio may be transmitted as a sequence of 50 frames, with each frame containing 20 milliseconds (ms) —1/50th of a second — of speech content.</span></span> <span data-ttu-id="f7044-131">Un segundo valor de vídeo puede dividirse como una secuencia de 30 imágenes fijas, cada una destinada a ser vista sólo 33.3 ms (1/30 de segundo) antes de que se muestre el siguiente fotograma de vídeo.</span><span class="sxs-lookup"><span data-stu-id="f7044-131">One second worth of video may be sliced as a sequence of 30 still images, each intended to be viewed for just 33.3ms — 1/30th of a second — before the next video frame is displayed.</span></span> <span data-ttu-id="f7044-132">El número de tramas transmitidas o representadas por segundo se denomina la **velocidad de fotogramas**.</span><span class="sxs-lookup"><span data-stu-id="f7044-132">The number of frames transmitted or rendered per second is called the **frame rate**.</span></span> <span data-ttu-id="f7044-133">"30fps" indica 30 fotogramas por segundo.</span><span class="sxs-lookup"><span data-stu-id="f7044-133">"30fps" indicates 30 frames per second.</span></span>

## <a name="audio-format"></a><span data-ttu-id="f7044-134">Formato de audio</span><span class="sxs-lookup"><span data-stu-id="f7044-134">Audio format</span></span>

<span data-ttu-id="f7044-135">Cada segundo de audio se representa como **ejemplos**de 16.000, con cada ejemplo que contiene 16 bits de datos.</span><span class="sxs-lookup"><span data-stu-id="f7044-135">Each second of audio is represented as 16,000 **samples**, with each sample containing 16-bits of data.</span></span> <span data-ttu-id="f7044-136">Un marco de audio 20 MS contiene 320 ejemplos (640 bytes de datos).</span><span class="sxs-lookup"><span data-stu-id="f7044-136">A 20ms audio frame contains 320 samples (640 bytes of data).</span></span>

## <a name="video-format"></a><span data-ttu-id="f7044-137">Formato de vídeo</span><span class="sxs-lookup"><span data-stu-id="f7044-137">Video format</span></span>

<span data-ttu-id="f7044-138">Hay varios formatos compatibles con el vídeo.</span><span class="sxs-lookup"><span data-stu-id="f7044-138">There are several formats supported for video.</span></span> <span data-ttu-id="f7044-139">Las dos propiedades clave de un formato de vídeo son el **tamaño del marco** y el **formato de color**.</span><span class="sxs-lookup"><span data-stu-id="f7044-139">Two key properties of a video format are its **frame size** and **color format**.</span></span> <span data-ttu-id="f7044-140">Los tamaños de fotograma compatibles incluyen 640 x 360 ("360p"), 1280x720 ("720p") y 1920 x 1080 ("1080p").</span><span class="sxs-lookup"><span data-stu-id="f7044-140">Supported frame sizes include 640x360 ("360p"), 1280x720 ("720p"), and 1920x1080 ("1080p").</span></span> <span data-ttu-id="f7044-141">Los formatos de color admitidos incluyen NV12 (12 bits por píxel) y RGB24 (24 bits por píxel).</span><span class="sxs-lookup"><span data-stu-id="f7044-141">Supported color formats include NV12 (12 bits per pixel) and RGB24 (24 bits per pixel).</span></span>

<span data-ttu-id="f7044-142">Un fotograma de vídeo "720p" contiene 921.600 píxeles (1280 veces 720).</span><span class="sxs-lookup"><span data-stu-id="f7044-142">A "720p" video frame contains 921,600 pixels (1280 times 720).</span></span> <span data-ttu-id="f7044-143">En el formato de color RGB24, cada píxel se representa como 3 bytes (24 bits), compuesto de un byte en cada uno de los componentes de color rojo, verde y azul.</span><span class="sxs-lookup"><span data-stu-id="f7044-143">In the RGB24 color format, each pixel is represented as 3 bytes (24-bits) comprised of one byte each of red, green, and blue color components.</span></span> <span data-ttu-id="f7044-144">Por lo tanto, un solo fotograma de vídeo 720p RGB24 requiere 2.764.800 bytes de datos (921.600 píxeles multiplicados por 3 bytes/píxel).</span><span class="sxs-lookup"><span data-stu-id="f7044-144">Therefore, a single 720p RGB24 video frame requires 2,764,800 bytes of data (921,600 pixels times 3 bytes/pixel).</span></span> <span data-ttu-id="f7044-145">A una velocidad de fotogramas de 30fps, el envío de fotogramas de vídeo 720p RGB24 significa un procesamiento de aproximadamente 80 MB/s de contenido (que es comprimido de forma sustancial por el códec de vídeo H. 264 antes de la transmisión por red).</span><span class="sxs-lookup"><span data-stu-id="f7044-145">At a frame rate of 30fps, sending 720p RGB24 video frames means processing approximately 80 MB/s of content (which is substantially compressed by the H.264 video codec before network transmission).</span></span>

<span data-ttu-id="f7044-146">Una funcionalidad avanzada de la plataforma permite a un bot enviar o recibir vídeo como fotogramas H. 264 **codificado** .</span><span class="sxs-lookup"><span data-stu-id="f7044-146">An advanced capability of the platform allows a bot to send/receive video as **encoded** H.264 frames.</span></span> <span data-ttu-id="f7044-147">Esto es compatible con bots que proporcionen su propio codificador/descodificador H. 264, o no necesiten la secuencia de vídeo descodificada en RGB24 sin formato o NV12 de mapas de bits.</span><span class="sxs-lookup"><span data-stu-id="f7044-147">This supports bots which provide their own H.264 encoder/decoder, or do not need the video stream decoded into raw RGB24 or NV12 bitmaps.</span></span>

## <a name="active-and-dominant-speakers"></a><span data-ttu-id="f7044-148">Altavoces activos y dominantes</span><span class="sxs-lookup"><span data-stu-id="f7044-148">Active and dominant speakers</span></span>

<span data-ttu-id="f7044-149">Cuando se une a una reunión de Microsoft teams que consta de varios participantes, un bot puede identificar los participantes de la reunión que están hablando en ese momento.</span><span class="sxs-lookup"><span data-stu-id="f7044-149">When joined to a Teams meeting consisting of multiple participants, a bot can identify which meeting participants are currently speaking.</span></span> <span data-ttu-id="f7044-150">Los **altavoces activos** identifican qué participantes se escuchan en cada trama de audio recibida.</span><span class="sxs-lookup"><span data-stu-id="f7044-150">**Active speakers** identify which participants are being heard in each received audio frame.</span></span> <span data-ttu-id="f7044-151">Los **altavoces dominantes** identifican qué participantes están actualmente más activos (o "dominante") en la conversación de grupo, aunque su voz no se escucha en cada trama de audio.</span><span class="sxs-lookup"><span data-stu-id="f7044-151">**Dominant speakers** identify which participants are currently most active (or "dominant") in the group conversation, even though their voice may not be heard in every audio frame.</span></span> <span data-ttu-id="f7044-152">El conjunto de altavoces dominantes puede cambiar a medida que varios participantes tomen turnos.</span><span class="sxs-lookup"><span data-stu-id="f7044-152">The set of dominant speakers can change as different participants take turns speaking.</span></span>

## <a name="video-subscription"></a><span data-ttu-id="f7044-153">Suscripción de vídeo</span><span class="sxs-lookup"><span data-stu-id="f7044-153">Video subscription</span></span>

<span data-ttu-id="f7044-154">En una llamada de 1:1, el bot recibirá automáticamente el vídeo del autor de la llamada si el bot está habilitado para recibir vídeo.</span><span class="sxs-lookup"><span data-stu-id="f7044-154">In a 1:1 call, the bot will automatically receive the video of the caller if the bot is enabled to receive video.</span></span> <span data-ttu-id="f7044-155">En una reunión de Microsoft Teams, el bot debe indicar a la plataforma qué participantes desea ver.</span><span class="sxs-lookup"><span data-stu-id="f7044-155">In a Teams meeting, the bot must indicate to the platform which participants it wants to see.</span></span> <span data-ttu-id="f7044-156">Una **suscripción de vídeo** es una solicitud del bot para recibir el contenido principal de vídeo o de uso compartido de pantalla de un participante.</span><span class="sxs-lookup"><span data-stu-id="f7044-156">A **video subscription** is a request by the bot to receive a participant’s main video or screen-sharing content.</span></span> <span data-ttu-id="f7044-157">A medida que los participantes de la reunión realizan la conversación, el bot puede modificar sus suscripciones de vídeo deseadas en función de las actualizaciones del conjunto de altavoces dominantes o de las notificaciones que indican qué participante está actualmente en uso compartido de la pantalla.</span><span class="sxs-lookup"><span data-stu-id="f7044-157">As the participants in the meeting conduct their conversation, the bot may modify its desired video subscriptions based on updates of the dominant speaker set or notifications indicating which participant is currently screen sharing.</span></span>

## <a name="developer-resources"></a><span data-ttu-id="f7044-158">Recursos para desarrolladores</span><span class="sxs-lookup"><span data-stu-id="f7044-158">Developer resources</span></span>

<span data-ttu-id="f7044-159">Para desarrollar un bot de medios hospedado en la aplicación, debe instalar el siguiente paquete de NuGet en el proyecto de Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="f7044-159">To develop an application-hosted media bot, you must install the following NuGet package within your Visual Studio project:</span></span>

- [<span data-ttu-id="f7044-160">Biblioteca de Microsoft. Graph. calls. Media .NET</span><span class="sxs-lookup"><span data-stu-id="f7044-160">Microsoft.Graph.Calls.Media .NET library</span></span>](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/)

<span data-ttu-id="f7044-161">Los bots de medios hospedados en aplicaciones requieren .NET/C# y Windows Server, tal y como se describe en detalle en [requisitos y consideraciones para los bots de medios hospedados en la aplicación](requirements-considerations-application-hosted-media-bots.md#application-hosted-media-bot-development-requires-cnet-and-windows-server).</span><span class="sxs-lookup"><span data-stu-id="f7044-161">Application-hosted media bots require .NET/C# and Windows Server, as described in detail in [Requirements and considerations for application-hosted media bots](requirements-considerations-application-hosted-media-bots.md#application-hosted-media-bot-development-requires-cnet-and-windows-server).</span></span>
