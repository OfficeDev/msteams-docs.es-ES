---
title: Requisitos y consideraciones para bots multimedia hospedados en aplicaciones
description: Comprender los requisitos y consideraciones importantes relacionados con la creación de bots multimedia hospedados en aplicaciones para Microsoft Teams.
ms.topic: conceptual
keywords: Máquina virtual de Azure de Windows Server multimedia hospedada por la aplicación
ms.date: 11/16/2018
ms.openlocfilehash: 4a191bbde6b592c74930069d794ff37273785c1b
ms.sourcegitcommit: dd2220f691029d043aaddfc7c229e332735acb1d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/24/2021
ms.locfileid: "51995956"
---
# <a name="requirements-and-considerations-for-application-hosted-media-bots"></a><span data-ttu-id="cf083-104">Requisitos y consideraciones para bots multimedia hospedados en aplicaciones</span><span class="sxs-lookup"><span data-stu-id="cf083-104">Requirements and considerations for application-hosted media bots</span></span>

<span data-ttu-id="cf083-105">Un bot multimedia hospedado por la aplicación requiere que la biblioteca [ `Microsoft.Graph.Communications.Calls.Media` .NET](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/) obtenga acceso a las secuencias multimedia de audio y vídeo.</span><span class="sxs-lookup"><span data-stu-id="cf083-105">An application-hosted media bot requires the [`Microsoft.Graph.Communications.Calls.Media` .NET library](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/) to access the audio and video media streams.</span></span> <span data-ttu-id="cf083-106">El bot debe implementarse en un equipo de Windows Server o en un sistema operativo invitado (OS) de Windows Server en Azure.</span><span class="sxs-lookup"><span data-stu-id="cf083-106">The bot must be deployed on a Windows Server machine or Windows Server guest Operating System (OS) in Azure.</span></span>

> [!NOTE]
> * <span data-ttu-id="cf083-107">Las instrucciones para desarrollar mensajes y bots de respuesta de voz interactiva (IVR) no se aplican por completo a la creación de bots multimedia hospedados en aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="cf083-107">The guidance for developing messaging and Interactive Voice Response (IVR) bots does not completely apply to building application-hosted media bots.</span></span>
> * <span data-ttu-id="cf083-108">Como la Plataforma multimedia en tiempo real de Microsoft para bots está en versión preliminar para desarrolladores, las instrucciones de este documento están sujetas a cambios.</span><span class="sxs-lookup"><span data-stu-id="cf083-108">As the Microsoft Real-time Media Platform for bots is in developer preview, the guidance in this document is subject to change.</span></span>

## <a name="c-or-net-and-windows-server-for-development"></a><span data-ttu-id="cf083-109">C# o .NET y Windows Server para desarrollo</span><span class="sxs-lookup"><span data-stu-id="cf083-109">C# or .NET and Windows Server for development</span></span>

<span data-ttu-id="cf083-110">Un bot multimedia hospedado por la aplicación requiere lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="cf083-110">An application-hosted media bot requires the following:</span></span>

- <span data-ttu-id="cf083-111">El bot debe desarrollarse en C# y el .NET Framework estándar e implementado en Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="cf083-111">The bot must be developed in C# and the standard .NET Framework and deployed in Microsoft Azure.</span></span> <span data-ttu-id="cf083-112">No puede usar las API de C++ o Node.js para obtener acceso a medios en tiempo real y .NET Core no es compatible con un bot de medios hospedado por la aplicación.</span><span class="sxs-lookup"><span data-stu-id="cf083-112">You cannot use C++ or Node.js APIs to access real-time media and .NET Core is not supported for an application-hosted media bot.</span></span>

- <span data-ttu-id="cf083-113">El bot se puede hospedar en uno de los siguientes entornos de servicio de Azure:</span><span class="sxs-lookup"><span data-stu-id="cf083-113">The bot can be hosted within one of the following Azure service environments:</span></span>
    - <span data-ttu-id="cf083-114">Servicio en la nube.</span><span class="sxs-lookup"><span data-stu-id="cf083-114">Cloud Service.</span></span>
    - <span data-ttu-id="cf083-115">Service Fabric con conjuntos de escalado de máquinas virtuales (VMSS).</span><span class="sxs-lookup"><span data-stu-id="cf083-115">Service Fabric with Virtual Machine Scale Sets (VMSS).</span></span>
    - <span data-ttu-id="cf083-116">Máquina virtual (VM) de infraestructura como servicio (IaaS).</span><span class="sxs-lookup"><span data-stu-id="cf083-116">Infrastructure as a Service (IaaS) Virtual Machine (VM).</span></span>  
  
- <span data-ttu-id="cf083-117">El bot no se puede implementar como una aplicación web de Azure.</span><span class="sxs-lookup"><span data-stu-id="cf083-117">The bot cannot be deployed as an Azure web app.</span></span>

- <span data-ttu-id="cf083-118">El bot debe ejecutarse en una versión reciente de la `Microsoft.Graph.Communications.Calls.Media` biblioteca .NET.</span><span class="sxs-lookup"><span data-stu-id="cf083-118">The bot must be running on a recent version of the `Microsoft.Graph.Communications.Calls.Media` .NET library.</span></span> <span data-ttu-id="cf083-119">El bot debe usar la versión disponible más reciente del paquete [NuGet](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/)o una versión que no tiene más de tres meses de antigüedad.</span><span class="sxs-lookup"><span data-stu-id="cf083-119">The bot must use either the newest available version of the [NuGet package](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/), or a version that is not more than three months old.</span></span> <span data-ttu-id="cf083-120">Las versiones anteriores de la biblioteca están en desuso y no funcionan después de unos meses.</span><span class="sxs-lookup"><span data-stu-id="cf083-120">Older versions of the library are deprecated and do not work after a few months.</span></span> <span data-ttu-id="cf083-121">Mantener la biblioteca actualizada garantiza la mejor interoperabilidad `Microsoft.Graph.Communications.Calls.Media` entre el bot y Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="cf083-121">Keeping the `Microsoft.Graph.Communications.Calls.Media` library up-to-date ensures the best interoperability between the bot and Microsoft Teams.</span></span>

<span data-ttu-id="cf083-122">En la siguiente sección se proporcionan detalles sobre dónde se encuentran las llamadas multimedia en tiempo real.</span><span class="sxs-lookup"><span data-stu-id="cf083-122">The next section provides details on where real-time media calls are located.</span></span>

## <a name="real-time-media-calls-stay-where-they-are-created"></a><span data-ttu-id="cf083-123">Las llamadas multimedia en tiempo real permanecen donde se crean</span><span class="sxs-lookup"><span data-stu-id="cf083-123">Real-time media calls stay where they are created</span></span>

<span data-ttu-id="cf083-124">Las llamadas multimedia en tiempo real permanecen en el equipo donde se crearon.</span><span class="sxs-lookup"><span data-stu-id="cf083-124">Real-time media calls stay on the computer where they were created.</span></span> <span data-ttu-id="cf083-125">Una llamada multimedia en tiempo real se ancla a la instancia de máquina virtual (VM) que aceptó o inició la llamada.</span><span class="sxs-lookup"><span data-stu-id="cf083-125">A real-time media call is pinned to the virtual machine (VM) instance that accepted or started the call.</span></span> <span data-ttu-id="cf083-126">Los medios de una llamada o reunión de Microsoft Teams fluyen a esa instancia de vm y los medios que el bot envía a Microsoft Teams también deben originarse desde esa máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="cf083-126">Media from a Microsoft Teams call or meeting flows to that VM instance, and media the bot sends back to Microsoft Teams must also originate from that VM.</span></span> <span data-ttu-id="cf083-127">Si hay llamadas multimedia en tiempo real en curso cuando se detiene la máquina virtual, dichas llamadas finalizan abruptamente.</span><span class="sxs-lookup"><span data-stu-id="cf083-127">If there are any real-time media calls in progress when the VM is stopped, those calls are abruptly terminated.</span></span> <span data-ttu-id="cf083-128">Si el bot tiene conocimientos previos sobre el apagado de vm pendiente, puede finalizar las llamadas.</span><span class="sxs-lookup"><span data-stu-id="cf083-128">If the bot has prior knowledge of the pending VM shutdown, it can end the calls.</span></span>

<span data-ttu-id="cf083-129">En la siguiente sección se proporcionan detalles sobre la accesibilidad de los bots multimedia hospedados en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="cf083-129">The next section provides details on accessibility of application-hosted media bots.</span></span>

## <a name="application-hosted-media-bots-accessible-on-the-internet"></a><span data-ttu-id="cf083-130">Bots multimedia hospedados en aplicaciones accesibles en Internet</span><span class="sxs-lookup"><span data-stu-id="cf083-130">Application-hosted media bots accessible on the internet</span></span>

<span data-ttu-id="cf083-131">Los bots multimedia hospedados en aplicaciones deben ser accesibles directamente en Internet.</span><span class="sxs-lookup"><span data-stu-id="cf083-131">Application-hosted media bots must be directly accessible on the internet.</span></span> <span data-ttu-id="cf083-132">Estos bots deben incluir las siguientes características:</span><span class="sxs-lookup"><span data-stu-id="cf083-132">These bots must include the following features:</span></span>

- <span data-ttu-id="cf083-133">Cada instancia de máquina virtual que hospeda un bot multimedia hospedado por la aplicación en Azure debe ser accesible directamente desde Internet mediante una dirección IP pública (ILPIP) de nivel de instancia.</span><span class="sxs-lookup"><span data-stu-id="cf083-133">Each VM instance hosting an application-hosted media bot in Azure must be directly accessible from the internet using an instance-level public IP address (ILPIP).</span></span>
    - <span data-ttu-id="cf083-134">Para obtener y configurar un ILPIP para un servicio en la nube de Azure, consulte [Instance level public IP classic overview](/azure/virtual-network/virtual-networks-instance-level-public-ip).</span><span class="sxs-lookup"><span data-stu-id="cf083-134">For obtaining and configuring an ILPIP for an Azure Cloud Service, see [instance level public IP classic overview](/azure/virtual-network/virtual-networks-instance-level-public-ip).</span></span>
    - <span data-ttu-id="cf083-135">Para configurar un ILPIP para un conjunto de escalado de vm, consulte [public IPv4 per virtual machine](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-networking#public-ipv4-per-virtual-machine).</span><span class="sxs-lookup"><span data-stu-id="cf083-135">For configuring an ILPIP for a VM Scale Set, see [public IPv4 per virtual machine](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-networking#public-ipv4-per-virtual-machine).</span></span>
- <span data-ttu-id="cf083-136">El servicio que hospeda un bot multimedia hospedado por la aplicación también debe configurar cada instancia de máquina virtual con un puerto público que se asigna a la instancia específica.</span><span class="sxs-lookup"><span data-stu-id="cf083-136">The service hosting an application-hosted media bot must also configure each VM instance with a public-facing port which maps to the specific instance.</span></span>
    - <span data-ttu-id="cf083-137">Para un servicio en la nube de Azure, esto requiere un extremo de entrada de instancia.</span><span class="sxs-lookup"><span data-stu-id="cf083-137">For an Azure Cloud Service, this requires an instance input endpoint.</span></span> <span data-ttu-id="cf083-138">Para obtener más información, vea [Enable communication for role instances in Azure](/azure/cloud-services/cloud-services-enable-communication-role-instances).</span><span class="sxs-lookup"><span data-stu-id="cf083-138">For more information, see [enable communication for role instances in Azure](/azure/cloud-services/cloud-services-enable-communication-role-instances).</span></span>
    - <span data-ttu-id="cf083-139">Para un conjunto de escalado de vm, se debe configurar una regla NAT en el equilibrador de carga.</span><span class="sxs-lookup"><span data-stu-id="cf083-139">For a VM Scale Set, a NAT rule on the load balancer must be configured.</span></span> <span data-ttu-id="cf083-140">Para obtener más información, [vea virtual networks and virtual machines in Azure](/azure/virtual-machines/windows/network-overview).</span><span class="sxs-lookup"><span data-stu-id="cf083-140">For more information, see [virtual networks and virtual machines in Azure](/azure/virtual-machines/windows/network-overview).</span></span>
- <span data-ttu-id="cf083-141">Bots multimedia hospedados en aplicaciones no son compatibles con bot Framework Emulator.</span><span class="sxs-lookup"><span data-stu-id="cf083-141">Application-hosted media bots are not supported by the Bot Framework Emulator.</span></span>

<span data-ttu-id="cf083-142">En la siguiente sección se proporcionan detalles sobre las consideraciones de escalabilidad y rendimiento de los bots multimedia hospedados en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="cf083-142">The next section provides details on scalability and performance considerations of application-hosted media bots.</span></span>

## <a name="scalability-and-performance-considerations"></a><span data-ttu-id="cf083-143">Consideraciones de rendimiento y escalabilidad</span><span class="sxs-lookup"><span data-stu-id="cf083-143">Scalability and performance considerations</span></span>

<span data-ttu-id="cf083-144">Los bots multimedia hospedados en aplicaciones requieren las siguientes consideraciones de escalabilidad y rendimiento:</span><span class="sxs-lookup"><span data-stu-id="cf083-144">Application-hosted media bots require the following scalability and performance considerations:</span></span>

## <a name="code-sample"></a><span data-ttu-id="cf083-145">Ejemplo de código</span><span class="sxs-lookup"><span data-stu-id="cf083-145">Code sample</span></span>

<span data-ttu-id="cf083-146">Los ejemplos de bots multimedia hospedados en la aplicación son los siguientes:</span><span class="sxs-lookup"><span data-stu-id="cf083-146">Application-hosted media bots samples are as follows:</span></span>

| <span data-ttu-id="cf083-147">**Nombre de ejemplo**</span><span class="sxs-lookup"><span data-stu-id="cf083-147">**Sample name**</span></span> | <span data-ttu-id="cf083-148">**Descripción**</span><span class="sxs-lookup"><span data-stu-id="cf083-148">**Description**</span></span> | <span data-ttu-id="cf083-149">**Graph**</span><span class="sxs-lookup"><span data-stu-id="cf083-149">**Graph**</span></span> |
|------------|-------------|-----------|
| <span data-ttu-id="cf083-150">Ejemplo de medios locales</span><span class="sxs-lookup"><span data-stu-id="cf083-150">Local media sample</span></span> | <span data-ttu-id="cf083-151">Ejemplos que ilustran diferentes escenarios de medios locales.</span><span class="sxs-lookup"><span data-stu-id="cf083-151">Samples that illustrates different local media scenarios.</span></span> | [<span data-ttu-id="cf083-152">View</span><span class="sxs-lookup"><span data-stu-id="cf083-152">View</span></span>](https://github.com/microsoftgraph/microsoft-graph-comms-samples/tree/master/Samples/V1.0Samples/LocalMediaSamples) |
| <span data-ttu-id="cf083-153">Ejemplo de medios remotos</span><span class="sxs-lookup"><span data-stu-id="cf083-153">Remote media sample</span></span> | <span data-ttu-id="cf083-154">Ejemplos que ilustran diferentes escenarios multimedia remotos.</span><span class="sxs-lookup"><span data-stu-id="cf083-154">Samples that illustrates different remote media scenarios.</span></span> | [<span data-ttu-id="cf083-155">View</span><span class="sxs-lookup"><span data-stu-id="cf083-155">View</span></span>](https://github.com/microsoftgraph/microsoft-graph-comms-samples/tree/master/Samples/V1.0Samples/RemoteMediaSamples) |

## <a name="see-also"></a><span data-ttu-id="cf083-156">Vea también</span><span class="sxs-lookup"><span data-stu-id="cf083-156">See also</span></span>

- [<span data-ttu-id="cf083-157">Documentación del SDK de llamadas de Graph</span><span class="sxs-lookup"><span data-stu-id="cf083-157">Graph Calling SDK Documentation</span></span>](https://microsoftgraph.github.io/microsoft-graph-comms-samples/docs/)
- <span data-ttu-id="cf083-158">Los bots requieren más capacidad de procesamiento y ancho de banda de red que los bots de mensajería e incurren en costos operativos significativamente más altos.</span><span class="sxs-lookup"><span data-stu-id="cf083-158">The bots require more compute and network bandwidth capacity than messaging bots and incur significantly higher operational costs.</span></span> <span data-ttu-id="cf083-159">Un desarrollador de bots multimedia en tiempo real debe medir cuidadosamente la escalabilidad del bot y asegurarse de que el bot no acepta más llamadas simultáneas de las que puede administrar.</span><span class="sxs-lookup"><span data-stu-id="cf083-159">A real-time media bot developer must carefully measure the bot's scalability, and ensure the bot does not accept more simultaneous calls than it can manage.</span></span> <span data-ttu-id="cf083-160">Un bot habilitado para vídeo solo puede soportar una o dos sesiones multimedia simultáneas por núcleo de CPU si usa los formatos de vídeo RGB24 o NV12 sin procesar.</span><span class="sxs-lookup"><span data-stu-id="cf083-160">A video-enabled bot can sustain only one or two concurrent media sessions per CPU core if using the raw RGB24 or NV12 video formats.</span></span>
- <span data-ttu-id="cf083-161">Actualmente, la Plataforma multimedia en tiempo real no aprovecha las unidades de procesamiento de gráficos (GPU) disponibles en la máquina virtual para desactivar la codificación o decodificación de vídeo H.264.</span><span class="sxs-lookup"><span data-stu-id="cf083-161">The Real-time Media Platform does not currently take advantage of any Graphics Processing Units (GPU) available on the VM to off-load H.264 video encoding or decoding.</span></span> <span data-ttu-id="cf083-162">En su lugar, la codificación y descodificación de vídeo se realizan en el software de la CPU.</span><span class="sxs-lookup"><span data-stu-id="cf083-162">Instead, video encode and decode are done in software on the CPU.</span></span> <span data-ttu-id="cf083-163">Si hay una GPU disponible, el bot aprovecha para su propia representación gráfica, por ejemplo, si el bot usa un motor de gráficos 3D.</span><span class="sxs-lookup"><span data-stu-id="cf083-163">If a GPU is available, the bot takes advantage of it for its own graphics rendering, for example, if the bot is using a 3D graphics engine.</span></span>
- <span data-ttu-id="cf083-164">La instancia de vm que hospeda el bot multimedia en tiempo real debe tener al menos 2 núcleos de CPU.</span><span class="sxs-lookup"><span data-stu-id="cf083-164">The VM instance hosting the real-time media bot must have at least 2 CPU cores.</span></span> <span data-ttu-id="cf083-165">Para Azure, se recomienda una máquina virtual de la serie Dv2.</span><span class="sxs-lookup"><span data-stu-id="cf083-165">For Azure, a Dv2-series virtual machine is recommended.</span></span> <span data-ttu-id="cf083-166">Para otros tipos de vm de Azure, un sistema con 4 CPU virtuales (vCPU) es el tamaño mínimo necesario.</span><span class="sxs-lookup"><span data-stu-id="cf083-166">For other Azure VM types, a system with 4 virtual CPUs (vCPU) is the minimum size required.</span></span> <span data-ttu-id="cf083-167">Para obtener más información acerca de los tipos de vm de Azure, vea [la documentación de Azure](/azure/virtual-machines/windows/sizes-general).</span><span class="sxs-lookup"><span data-stu-id="cf083-167">For more information about Azure VM types, see [Azure documentation](/azure/virtual-machines/windows/sizes-general).</span></span>

<span data-ttu-id="cf083-168">En la siguiente sección se proporcionan ejemplos que ilustran diferentes escenarios de medios locales.</span><span class="sxs-lookup"><span data-stu-id="cf083-168">The next section provides samples that illustrate different local media scenarios.</span></span>

## <a name="samples-and-additional-resources"></a><span data-ttu-id="cf083-169">Ejemplos y recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="cf083-169">Samples and additional resources</span></span>

- [<span data-ttu-id="cf083-170">Aplicaciones de ejemplo</span><span class="sxs-lookup"><span data-stu-id="cf083-170">Sample applications</span></span>](https://github.com/microsoftgraph/microsoft-graph-comms-samples/tree/master/Samples/V1.0Samples/LocalMediaSamples)
- [<span data-ttu-id="cf083-171">Documentación del SDK de llamadas de Graph</span><span class="sxs-lookup"><span data-stu-id="cf083-171">Graph calling SDK documentation</span></span>](https://microsoftgraph.github.io/microsoft-graph-comms-samples/docs/)

## <a name="next-step"></a><span data-ttu-id="cf083-172">Paso siguiente</span><span class="sxs-lookup"><span data-stu-id="cf083-172">Next step</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="cf083-173">Formatos multimedia admitidos</span><span class="sxs-lookup"><span data-stu-id="cf083-173">Supported media formats</span></span>](~/resources/media-formats.md)
