---
title: Requisitos y consideraciones para bots multimedia hospedados en aplicaciones
description: Comprenda los requisitos y consideraciones importantes relacionados con la creación de bots multimedia hospedados en aplicaciones para Microsoft Teams.
ms.topic: conceptual
keywords: máquina virtual de Azure de Windows Server de medios hospedados en la aplicación
ms.date: 11/16/2018
ms.openlocfilehash: bf75b7f689713f16cb3ff9ff4313ab829b5cc2d6
ms.sourcegitcommit: 976e870cc925f61b76c3830ec04ba6e4bdfde32f
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/27/2021
ms.locfileid: "50014491"
---
# <a name="requirements-and-considerations-for-application-hosted-media-bots"></a><span data-ttu-id="1895e-104">Requisitos y consideraciones para bots multimedia hospedados en aplicaciones</span><span class="sxs-lookup"><span data-stu-id="1895e-104">Requirements and considerations for application-hosted media bots</span></span>

<span data-ttu-id="1895e-105">No todas las instrucciones para desarrollar bots de mensajería y respuesta interactiva de voz (IVR) se aplican por igual a la creación de bots multimedia hospedados en aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="1895e-105">Not all guidance for developing messaging and Interactive Voice Response (IVR) bots applies equally to building application-hosted media bots.</span></span> <span data-ttu-id="1895e-106">En este artículo se describen algunos de los requisitos y consideraciones importantes para desarrollar y ejecutar un bot multimedia hospedado en aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="1895e-106">This article describes some of the important requirements and considerations for developing and running an application-hosted media bot.</span></span>

> [!NOTE]
> <span data-ttu-id="1895e-107">Dado que la Plataforma de medios en tiempo real de Microsoft para bots está en versión preliminar para desarrolladores, las instrucciones de este artículo están sujetas a cambios.</span><span class="sxs-lookup"><span data-stu-id="1895e-107">Because the Microsoft Real-time Media Platform for Bots is in developer preview, the guidance in this article is subject to change.</span></span>

## <a name="application-hosted-media-bot-development-requires-cnet-and-windows-server"></a><span data-ttu-id="1895e-108">El desarrollo de bots multimedia hospedados en aplicaciones requiere C#/.NET y Windows Server</span><span class="sxs-lookup"><span data-stu-id="1895e-108">Application-hosted media bot development requires C#/.NET and Windows Server</span></span>

- <span data-ttu-id="1895e-109">Un bot de medios hospedado en aplicaciones requiere la biblioteca .NET (disponible aquí para tener acceso a las secuencias multimedia de audio y vídeo, y el bot debe implementarse en un equipo con Windows Server (o el sistema operativo invitado de Windows Server en `Microsoft.Graph.Communications.Calls.Media` Azure).[](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/)</span><span class="sxs-lookup"><span data-stu-id="1895e-109">An application-hosted media bot requires the `Microsoft.Graph.Communications.Calls.Media` .NET library ([available here](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/) to access the audio and video media streams, and the bot must be deployed on a Windows Server machine (or Windows Server guest OS in Azure).</span></span> <span data-ttu-id="1895e-110">Por lo tanto, el bot debe desarrollarse en C# y .NET Framework estándar e implementarse en Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="1895e-110">Therefore, the bot must be developed in C# and the standard .NET Framework and deployed in Microsoft Azure.</span></span> <span data-ttu-id="1895e-111">No puedes usar C++ ni Node.js API para acceder a medios en tiempo real y .NET Core no es compatible con un bot de medios hospedado en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="1895e-111">You can't use C++ or Node.js APIs to access real-time media and .NET Core is not supported for an application-hosted media bot.</span></span>

- <span data-ttu-id="1895e-112">Un bot de medios hospedado por la aplicación se puede hospedar en uno de los siguientes entornos de servicio de Azure:</span><span class="sxs-lookup"><span data-stu-id="1895e-112">An application-hosted media bot can be hosted within one of the following Azure service environments:</span></span>
  - <span data-ttu-id="1895e-113">Servicio en la nube.</span><span class="sxs-lookup"><span data-stu-id="1895e-113">Cloud Service.</span></span>
  - <span data-ttu-id="1895e-114">Service Fabric con conjuntos de escalado de máquinas virtuales (VMSS).</span><span class="sxs-lookup"><span data-stu-id="1895e-114">Service Fabric with Virtual Machine Scale Sets (VMSS).</span></span>
  - <span data-ttu-id="1895e-115">Máquina virtual (VM) de infraestructura como servicio (IaaS).</span><span class="sxs-lookup"><span data-stu-id="1895e-115">Infrastructure as a Service (IaaS) Virtual Machine (VM).</span></span>  
  
- <span data-ttu-id="1895e-116">Un bot multimedia hospedado en la aplicación no se puede implementar como una aplicación web de Azure.</span><span class="sxs-lookup"><span data-stu-id="1895e-116">An application-hosted media bot can't be deployed as an Azure Web App.</span></span>

- <span data-ttu-id="1895e-117">Un bot de medios hospedado en la aplicación debe ejecutarse en una versión reciente de la `Microsoft.Graph.Communications.Calls.Media` biblioteca .NET.</span><span class="sxs-lookup"><span data-stu-id="1895e-117">An application-hosted media bot must be running on a recent version of the `Microsoft.Graph.Communications.Calls.Media` .NET library.</span></span> <span data-ttu-id="1895e-118">El bot debe usar la versión más reciente disponible del paquete [NuGet](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/)o una versión que no tiene más de tres meses de antigüedad.</span><span class="sxs-lookup"><span data-stu-id="1895e-118">The bot should use either the newest available version of the [NuGet package](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/), or a version that is not more than three months old.</span></span> <span data-ttu-id="1895e-119">Las versiones anteriores de la biblioteca estarán en desuso y es posible que no funcionen después de unos meses.</span><span class="sxs-lookup"><span data-stu-id="1895e-119">Older versions of the library will be deprecated and may not work after a few months.</span></span> <span data-ttu-id="1895e-120">Mantener la biblioteca actualizada garantizará la mejor interoperabilidad `Microsoft.Graph.Communications.Calls.Media` entre el bot y Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="1895e-120">Keeping the `Microsoft.Graph.Communications.Calls.Media` library up-to-date will ensure the best interoperability between the bot and Microsoft Teams.</span></span>

## <a name="real-time-media-calls-stay-on-the-machine-where-they-were-created"></a><span data-ttu-id="1895e-121">Las llamadas multimedia en tiempo real permanecen en el equipo donde se crearon</span><span class="sxs-lookup"><span data-stu-id="1895e-121">Real-time media calls stay on the machine where they were created</span></span>

- <span data-ttu-id="1895e-122">Una llamada multimedia en tiempo real se ancla a la instancia de máquina virtual (VM) que aceptó o inició la llamada.</span><span class="sxs-lookup"><span data-stu-id="1895e-122">A real-time media call is pinned to the virtual machine (VM) instance that accepted or started the call.</span></span> <span data-ttu-id="1895e-123">Los medios de una llamada o reunión de Microsoft Teams fluirán a esa instancia de máquina virtual, y los medios que el bot envía a Microsoft Teams también deben originarse desde esa máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="1895e-123">Media from a Microsoft Teams call or meeting will flow to that VM instance, and media the bot sends back to Microsoft Teams must also originate from that VM.</span></span>
- <span data-ttu-id="1895e-124">Si hay llamadas multimedia en tiempo real en curso cuando se detiene la máquina virtual, dichas llamadas finalizarán bruscamente.</span><span class="sxs-lookup"><span data-stu-id="1895e-124">If there are any real-time media calls in progress when the VM is stopped, those calls will be abruptly terminated.</span></span> <span data-ttu-id="1895e-125">Si el bot tiene conocimientos previos del apagado pendiente de la máquina virtual, puede intentar finalizar "correctamente" las llamadas.</span><span class="sxs-lookup"><span data-stu-id="1895e-125">If the bot has prior knowledge of the pending VM shutdown, it can try to "gracefully" end the calls.</span></span>

## <a name="application-hosted-media-bots-must-be-directly-accessible-on-the-internet"></a><span data-ttu-id="1895e-126">Los bots de medios hospedados en aplicaciones deben ser accesibles directamente en Internet</span><span class="sxs-lookup"><span data-stu-id="1895e-126">Application-hosted media bots must be directly accessible on the internet</span></span>

- <span data-ttu-id="1895e-127">Cada instancia de máquina virtual que hospeda un bot de medios hospedado por la aplicación en Azure debe ser accesible directamente desde Internet mediante una dirección IP pública de nivel de instancia (ILPIP).</span><span class="sxs-lookup"><span data-stu-id="1895e-127">Each VM instance hosting an application-hosted media bot in Azure must be directly accessible from the internet using an instance-level public IP address (ILPIP).</span></span>
  - <span data-ttu-id="1895e-128">Para obtener y configurar un ILPIP para un servicio en la nube de Azure, vea información general sobre ip pública [(clásica) de nivel de instancia.](/azure/virtual-network/virtual-networks-instance-level-public-ip)</span><span class="sxs-lookup"><span data-stu-id="1895e-128">For obtaining and configuring an ILPIP for an Azure Cloud Service, see [Instance level public IP (Classic) overview](/azure/virtual-network/virtual-networks-instance-level-public-ip).</span></span>
  - <span data-ttu-id="1895e-129">Para configurar un ILPIP para un conjunto de escalado de vm, consulte [IPv4 público por máquina virtual.](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-networking#public-ipv4-per-virtual-machine)</span><span class="sxs-lookup"><span data-stu-id="1895e-129">For configuring an ILPIP for a VM Scale Set, see [Public IPv4 per virtual machine](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-networking#public-ipv4-per-virtual-machine).</span></span>
- <span data-ttu-id="1895e-130">El servicio que hospeda un bot multimedia hospedado en la aplicación también debe configurar cada instancia de máquina virtual con un puerto de acceso público que se asigna a la instancia específica.</span><span class="sxs-lookup"><span data-stu-id="1895e-130">The service hosting an application-hosted media bot must also configure each VM instance with a public-facing port which maps to the specific instance.</span></span>
  - <span data-ttu-id="1895e-131">Para un servicio en la nube de Azure, esto requiere un punto de conexión de entrada de instancia; vea [Habilitar la comunicación para instancias de roles en Azure.](/azure/cloud-services/cloud-services-enable-communication-role-instances)</span><span class="sxs-lookup"><span data-stu-id="1895e-131">For an Azure Cloud Service, this requires an instance input endpoint; see [Enable communication for role instances in Azure](/azure/cloud-services/cloud-services-enable-communication-role-instances).</span></span>
  - <span data-ttu-id="1895e-132">Para un conjunto de escalado de vm, debe configurarse una regla NAT en el equilibrador de carga; vea [Redes virtuales y máquinas virtuales en Azure.](/azure/virtual-machines/windows/network-overview)</span><span class="sxs-lookup"><span data-stu-id="1895e-132">For a VM Scale Set, a NAT rule on the load balancer must be configured; see [Virtual networks and virtual machines in Azure](/azure/virtual-machines/windows/network-overview).</span></span>
- <span data-ttu-id="1895e-133">Los bots multimedia hospedados en la aplicación no son compatibles con el emulador de Bot Framework.</span><span class="sxs-lookup"><span data-stu-id="1895e-133">Application-hosted media bots aren't supported by the Bot Framework Emulator.</span></span>

## <a name="scalability-and-performance-considerations"></a><span data-ttu-id="1895e-134">Consideraciones de rendimiento y escalabilidad</span><span class="sxs-lookup"><span data-stu-id="1895e-134">Scalability and performance considerations</span></span>

- <span data-ttu-id="1895e-135">Los bots de medios hospedados en aplicaciones requieren más capacidad de proceso y red (ancho de banda) que los bots de mensajería y pueden incurrir en costos operativos significativamente mayores.</span><span class="sxs-lookup"><span data-stu-id="1895e-135">Application-hosted media bots require more compute and network (bandwidth) capacity than messaging bots and may incur significantly higher operational costs.</span></span> <span data-ttu-id="1895e-136">Un desarrollador de bots multimedia en tiempo real debe medir cuidadosamente la escalabilidad del bot y asegurarse de que el bot no acepta más llamadas simultáneas de las que puede administrar.</span><span class="sxs-lookup"><span data-stu-id="1895e-136">A real-time media bot developer must carefully measure the bot's scalability, and ensure the bot doesn't accept more simultaneous calls than it can manage.</span></span> <span data-ttu-id="1895e-137">Un bot habilitado para vídeo puede ser capaz de mantener solo una o dos sesiones multimedia simultáneas por núcleo de CPU (si usa los formatos de vídeo RGB24 o NV12 "sin procesar").</span><span class="sxs-lookup"><span data-stu-id="1895e-137">A video-enabled bot may be able to sustain only one or two concurrent media sessions per CPU core (if using the "raw" RGB24 or NV12 video formats).</span></span>
- <span data-ttu-id="1895e-138">La plataforma multimedia en tiempo real no aprovecha actualmente ninguna unidades de procesamiento gráfico (GPU) disponibles en la máquina virtual para desactivar la codificación/decodificación de vídeo H.264.</span><span class="sxs-lookup"><span data-stu-id="1895e-138">The Real-time Media Platform doesn't currently take advantage of any Graphics Processing Units (GPU) available on the VM to off-load H.264 video encoding/decoding.</span></span> <span data-ttu-id="1895e-139">En su lugar, la codificación y descodificación de vídeo se realizan en el software de la CPU.</span><span class="sxs-lookup"><span data-stu-id="1895e-139">Instead, video encode and decode are done in software on the CPU.</span></span> <span data-ttu-id="1895e-140">Si una GPU está disponible, el bot puede aprovecharlo para su propia representación de gráficos (por ejemplo, si el bot usa un motor de gráficos 3D).</span><span class="sxs-lookup"><span data-stu-id="1895e-140">If a GPU is available, the bot may take advantage of it for its own graphics rendering (e.g. if the bot is using a 3D graphics engine).</span></span>
- <span data-ttu-id="1895e-141">La instancia de máquina virtual que hospeda el bot multimedia en tiempo real debe tener al menos 2 núcleos de CPU.</span><span class="sxs-lookup"><span data-stu-id="1895e-141">The VM instance hosting the real-time media bot must have at least 2 CPU cores.</span></span> <span data-ttu-id="1895e-142">Para Azure, se recomienda una máquina virtual de la serie Dv2.</span><span class="sxs-lookup"><span data-stu-id="1895e-142">For Azure, a Dv2-series virtual machine is recommended.</span></span> <span data-ttu-id="1895e-143">Para otros tipos de VM de Azure, un sistema con 4 CPU virtuales (vCPU) es el tamaño mínimo necesario.</span><span class="sxs-lookup"><span data-stu-id="1895e-143">For other Azure VM types, a system with 4 virtual CPUs (vCPU) is the minimum size required.</span></span> <span data-ttu-id="1895e-144">La información detallada sobre los tipos de vm de Azure está disponible en la [documentación de Azure.](/azure/virtual-machines/windows/sizes-general)</span><span class="sxs-lookup"><span data-stu-id="1895e-144">Detailed information about Azure VM types is available in the [Azure documentation](/azure/virtual-machines/windows/sizes-general).</span></span>

## <a name="samples-and-additional-resources"></a><span data-ttu-id="1895e-145">Ejemplos y recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="1895e-145">Samples and Additional Resources</span></span>

- [<span data-ttu-id="1895e-146">Aplicaciones de ejemplo</span><span class="sxs-lookup"><span data-stu-id="1895e-146">Sample applications</span></span>](https://github.com/microsoftgraph/microsoft-graph-comms-samples/tree/master/Samples/V1.0Samples/LocalMediaSamples)
- [<span data-ttu-id="1895e-147">Documentación del SDK de llamadas de Graph</span><span class="sxs-lookup"><span data-stu-id="1895e-147">Graph Calling SDK Documentation</span></span>](https://microsoftgraph.github.io/microsoft-graph-comms-samples/docs/)
