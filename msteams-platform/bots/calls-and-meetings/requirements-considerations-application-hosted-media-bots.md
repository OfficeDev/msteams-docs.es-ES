---
title: Requisitos y consideraciones para los bots de medios hospedados en la aplicación
description: Comprenda los requisitos y las consideraciones importantes relacionados con la creación de bots de medios hospedados en aplicaciones para Microsoft Teams.
keywords: VM de Windows Server Azure media hospedada en la aplicación
ms.date: 11/16/2018
ms.openlocfilehash: f5b721edacb11e867d05c8213b74036cb51f419c
ms.sourcegitcommit: 4329a94918263c85d6c65ff401f571556b80307b
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 02/01/2020
ms.locfileid: "41675872"
---
# <a name="requirements-and-considerations-for-application-hosted-media-bots"></a><span data-ttu-id="31bd6-104">Requisitos y consideraciones para los bots de medios hospedados en la aplicación</span><span class="sxs-lookup"><span data-stu-id="31bd6-104">Requirements and considerations for application-hosted media bots</span></span>

<span data-ttu-id="31bd6-105">No todas las instrucciones para desarrollar bots de mensajería y de respuesta interactiva de voz (IVR) se aplican por igual para crear bots de medios hospedados en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="31bd6-105">Not all guidance for developing messaging and Interactive Voice Response (IVR) bots applies equally to building application-hosted media bots.</span></span> <span data-ttu-id="31bd6-106">En este artículo se describen algunos de los requisitos y consideraciones importantes para desarrollar y ejecutar un bot de medios hospedado por la aplicación.</span><span class="sxs-lookup"><span data-stu-id="31bd6-106">This article describes some of the important requirements and considerations for developing and running an application-hosted media bot.</span></span>

> [!NOTE]
> <span data-ttu-id="31bd6-107">Como la plataforma de medios en tiempo real de Microsoft para bots está en vista previa para desarrolladores, las instrucciones de este artículo están sujetas a cambios.</span><span class="sxs-lookup"><span data-stu-id="31bd6-107">Because the Microsoft Real-time Media Platform for Bots is in developer preview, the guidance in this article is subject to change.</span></span>

## <a name="application-hosted-media-bot-development-requires-cnet-and-windows-server"></a><span data-ttu-id="31bd6-108">El desarrollo de robots de medios hospedados en aplicaciones requiere C#/.NET y Windows Server</span><span class="sxs-lookup"><span data-stu-id="31bd6-108">Application-hosted media bot development requires C#/.NET and Windows Server</span></span>

- <span data-ttu-id="31bd6-109">Un bot? s de medios hospedado `Microsoft.Graph.Communications.Calls.Media` en aplicaciones requiere la biblioteca .net ([disponible aquí](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/) para obtener acceso a los flujos de medios de audio y vídeo, y el bot debe implementarse en un equipo con Windows Server o en un sistema operativo invitado de Windows Server en Azure).</span><span class="sxs-lookup"><span data-stu-id="31bd6-109">An application-hosted media bot requires the `Microsoft.Graph.Communications.Calls.Media` .NET library ([available here](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/) to access the audio and video media streams, and the bot must be deployed on a Windows Server machine (or Windows Server guest OS in Azure).</span></span> <span data-ttu-id="31bd6-110">Por lo tanto, el bot debe desarrollarse en C# y en .NET Framework estándar y se puede implementar en Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="31bd6-110">Therefore, the bot must be developed in C# and the standard .NET Framework and deployed in Microsoft Azure.</span></span> <span data-ttu-id="31bd6-111">No puede usar las API de C++ o node. js para acceder a medios en tiempo real y .NET Core no se admite para un bot de medios hospedado por la aplicación.</span><span class="sxs-lookup"><span data-stu-id="31bd6-111">You can't use C++ or Node.js APIs to access real-time media and .NET Core is not supported for an application-hosted media bot.</span></span>

- <span data-ttu-id="31bd6-112">Un bot de medios hospedados por la aplicación puede alojarse en uno de los siguientes entornos de servicio de Azure:</span><span class="sxs-lookup"><span data-stu-id="31bd6-112">An application-hosted media bot can be hosted within one of the following Azure service environments:</span></span>
  - <span data-ttu-id="31bd6-113">Servicio en la nube.</span><span class="sxs-lookup"><span data-stu-id="31bd6-113">Cloud Service.</span></span>
  - <span data-ttu-id="31bd6-114">Fabric de servicio con conjuntos de escalas de máquinas virtuales (VMSS).</span><span class="sxs-lookup"><span data-stu-id="31bd6-114">Service Fabric with Virtual Machine Scale Sets (VMSS).</span></span>
  - <span data-ttu-id="31bd6-115">Máquina virtual (VM) de infraestructura como servicio (IaaS).</span><span class="sxs-lookup"><span data-stu-id="31bd6-115">Infrastructure as a Service (IaaS) Virtual Machine (VM).</span></span>  
  
- <span data-ttu-id="31bd6-116">Un bot? n de medios hospedado en aplicaciones no se puede implementar como una aplicación Web de Azure.</span><span class="sxs-lookup"><span data-stu-id="31bd6-116">An application-hosted media bot can't be deployed as an Azure Web App.</span></span>

- <span data-ttu-id="31bd6-117">Un bot de medios hospedado en la aplicación debe ejecutarse en una versión `Microsoft.Graph.Communications.Calls.Media` reciente de la biblioteca de .net.</span><span class="sxs-lookup"><span data-stu-id="31bd6-117">An application-hosted media bot must be running on a recent version of the `Microsoft.Graph.Communications.Calls.Media` .NET library.</span></span> <span data-ttu-id="31bd6-118">El bot debe usar la versión más reciente disponible del [paquete NuGet](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/)o una versión que no tenga más de tres meses de antigüedad.</span><span class="sxs-lookup"><span data-stu-id="31bd6-118">The bot should use either the newest available version of the [NuGet package](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/), or a version that is not more than three months old.</span></span> <span data-ttu-id="31bd6-119">Las versiones anteriores de la biblioteca estarán obsoletas y es posible que no funcionen después de unos meses.</span><span class="sxs-lookup"><span data-stu-id="31bd6-119">Older versions of the library will be deprecated and may not work after a few months.</span></span> <span data-ttu-id="31bd6-120">Mantener la `Microsoft.Graph.Communications.Calls.Media` biblioteca actualizada, garantizará la mejor interoperabilidad entre el bot y Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="31bd6-120">Keeping the `Microsoft.Graph.Communications.Calls.Media` library up-to-date will ensure the best interoperability between the bot and Microsoft Teams.</span></span>

## <a name="real-time-media-calls-stay-on-the-machine-where-they-were-created"></a><span data-ttu-id="31bd6-121">Las llamadas de medios en tiempo real permanecen en el equipo en el que se crearon</span><span class="sxs-lookup"><span data-stu-id="31bd6-121">Real-time media calls stay on the machine where they were created</span></span>

- <span data-ttu-id="31bd6-122">Una llamada a medios en tiempo real está anclada a la instancia de la máquina virtual (VM) que aceptó o inició la llamada.</span><span class="sxs-lookup"><span data-stu-id="31bd6-122">A real-time media call is pinned to the virtual machine (VM) instance that accepted or started the call.</span></span> <span data-ttu-id="31bd6-123">Los medios de una llamada o reunión de Microsoft Teams fluirá a esa instancia de VM y los medios que el bot devuelve a Microsoft Teams también deben originarse desde esa máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="31bd6-123">Media from a Microsoft Teams call or meeting will flow to that VM instance, and media the bot sends back to Microsoft Teams must also originate from that VM.</span></span>
- <span data-ttu-id="31bd6-124">Si hay llamadas de medios en tiempo real en curso cuando se detiene la máquina virtual, esas llamadas se finalizarán de forma abrupta.</span><span class="sxs-lookup"><span data-stu-id="31bd6-124">If there are any real-time media calls in progress when the VM is stopped, those calls will be abruptly terminated.</span></span> <span data-ttu-id="31bd6-125">Si el bot tiene conocimientos previos sobre el cierre de la máquina virtual pendiente, puede intentar "de forma correcta" finalizar las llamadas.</span><span class="sxs-lookup"><span data-stu-id="31bd6-125">If the bot has prior knowledge of the pending VM shutdown, it can try to "gracefully" end the calls.</span></span>

## <a name="application-hosted-media-bots-must-be-directly-accessible-on-the-internet"></a><span data-ttu-id="31bd6-126">Los bots de medios hospedados en aplicaciones deben ser accesibles directamente en Internet</span><span class="sxs-lookup"><span data-stu-id="31bd6-126">Application-hosted media bots must be directly accessible on the internet</span></span>

- <span data-ttu-id="31bd6-127">Cada instancia de VM que hospeda un bot de medios hospedado en la aplicación en Azure debe ser accesible directamente desde Internet mediante una dirección IP pública de nivel de instancia (ILPIP).</span><span class="sxs-lookup"><span data-stu-id="31bd6-127">Each VM instance hosting an application-hosted media bot in Azure must be directly accessible from the internet using an instance-level public IP address (ILPIP).</span></span>
  - <span data-ttu-id="31bd6-128">Para obtener y configurar un ILPIP para un servicio de nube de Azure, consulte [información general sobre la IP pública en el nivel de instancia (Classic)](/azure/virtual-network/virtual-networks-instance-level-public-ip).</span><span class="sxs-lookup"><span data-stu-id="31bd6-128">For obtaining and configuring an ILPIP for an Azure Cloud Service, see [Instance level public IP (Classic) overview](/azure/virtual-network/virtual-networks-instance-level-public-ip).</span></span>
  - <span data-ttu-id="31bd6-129">Para configurar un ILPIP para un conjunto de escalaciones de VM, consulte [Public IPv4 per Virtual Machine](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-networking#public-ipv4-per-virtual-machine).</span><span class="sxs-lookup"><span data-stu-id="31bd6-129">For configuring an ILPIP for a VM Scale Set, see [Public IPv4 per virtual machine](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-networking#public-ipv4-per-virtual-machine).</span></span>
- <span data-ttu-id="31bd6-130">El servicio que hospeda un Boto multimedia hospedado en la aplicación también debe configurar cada instancia de VM con un puerto de conexión pública que se asigna a la instancia específica.</span><span class="sxs-lookup"><span data-stu-id="31bd6-130">The service hosting an application-hosted media bot must also configure each VM instance with a public-facing port which maps to the specific instance.</span></span>
  - <span data-ttu-id="31bd6-131">Para un servicio de nube de Azure, esto requiere un punto de conexión de entrada de instancia; consulte [enable Communication for role instances in Azure](/azure/cloud-services/cloud-services-enable-communication-role-instances).</span><span class="sxs-lookup"><span data-stu-id="31bd6-131">For an Azure Cloud Service, this requires an instance input endpoint; see [Enable communication for role instances in Azure](/azure/cloud-services/cloud-services-enable-communication-role-instances).</span></span>
  - <span data-ttu-id="31bd6-132">Para un conjunto de escalas de máquina virtual, debe configurarse una regla NAT en el equilibrador de carga; vea [redes virtuales y máquinas virtuales en Azure](/azure/virtual-machines/windows/network-overview).</span><span class="sxs-lookup"><span data-stu-id="31bd6-132">For a VM Scale Set, a NAT rule on the load balancer must be configured; see [Virtual networks and virtual machines in Azure](/azure/virtual-machines/windows/network-overview).</span></span>
- <span data-ttu-id="31bd6-133">Los bots de medios hospedados en aplicaciones no son compatibles con el emulador de bot Framework.</span><span class="sxs-lookup"><span data-stu-id="31bd6-133">Application-hosted media bots aren't supported by the Bot Framework Emulator.</span></span>

## <a name="scalability-and-performance-considerations"></a><span data-ttu-id="31bd6-134">Consideraciones de rendimiento y escalabilidad</span><span class="sxs-lookup"><span data-stu-id="31bd6-134">Scalability and performance considerations</span></span>

- <span data-ttu-id="31bd6-135">Los bots de medios hospedados en aplicaciones requieren más capacidad de cálculo y de red (ancho de banda) que los bots de mensajería y pueden incurrir en costos operativos mucho más altos.</span><span class="sxs-lookup"><span data-stu-id="31bd6-135">Application-hosted media bots require more compute and network (bandwidth) capacity than messaging bots and may incur significantly higher operational costs.</span></span> <span data-ttu-id="31bd6-136">Un desarrollador de robots de medios en tiempo real debe medir cuidadosamente la escalabilidad del bot y asegurarse de que el bot no acepta más llamadas simultáneas de las que puede administrar.</span><span class="sxs-lookup"><span data-stu-id="31bd6-136">A real-time media bot developer must carefully measure the bot's scalability, and ensure the bot doesn't accept more simultaneous calls than it can manage.</span></span> <span data-ttu-id="31bd6-137">Un bot habilitado para vídeo puede soportar solo una o dos sesiones de medios simultáneos por núcleo de CPU (si usa los formatos de vídeo "RAW" RGB24 o NV12).</span><span class="sxs-lookup"><span data-stu-id="31bd6-137">A video-enabled bot may be able to sustain only one or two concurrent media sessions per CPU core (if using the "raw" RGB24 or NV12 video formats).</span></span>
- <span data-ttu-id="31bd6-138">Actualmente, la plataforma de medios en tiempo real no aprovecha las unidades de procesamiento de gráficos (GPU) disponibles en la máquina virtual para descargar la codificación y descodificación de vídeo H. 264.</span><span class="sxs-lookup"><span data-stu-id="31bd6-138">The Real-time Media Platform doesn't currently take advantage of any Graphics Processing Units (GPU) available on the VM to off-load H.264 video encoding/decoding.</span></span> <span data-ttu-id="31bd6-139">En su lugar, la codificación y descodificación de vídeo se realiza en el software de la CPU.</span><span class="sxs-lookup"><span data-stu-id="31bd6-139">Instead, video encode and decode are done in software on the CPU.</span></span> <span data-ttu-id="31bd6-140">Si hay disponible una GPU, el bot puede aprovecharla para su propia representación gráfica (por ejemplo, si el bot usa un motor de gráficos 3D).</span><span class="sxs-lookup"><span data-stu-id="31bd6-140">If a GPU is available, the bot may take advantage of it for its own graphics rendering (e.g. if the bot is using a 3D graphics engine).</span></span>
- <span data-ttu-id="31bd6-141">La instancia de VM que hospeda el bot de medios en tiempo real debe tener al menos 2 núcleos de CPU.</span><span class="sxs-lookup"><span data-stu-id="31bd6-141">The VM instance hosting the real-time media bot must have at least 2 CPU cores.</span></span> <span data-ttu-id="31bd6-142">Para Azure, se recomienda una máquina virtual de Dv2-series.</span><span class="sxs-lookup"><span data-stu-id="31bd6-142">For Azure, a Dv2-series virtual machine is recommended.</span></span> <span data-ttu-id="31bd6-143">Para otros tipos de VM de Azure, un sistema con 4 CPU virtuales (vCPU) es el tamaño mínimo requerido.</span><span class="sxs-lookup"><span data-stu-id="31bd6-143">For other Azure VM types, a system with 4 virtual CPUs (vCPU) is the minimum size required.</span></span> <span data-ttu-id="31bd6-144">Encontrará información detallada sobre los tipos de máquinas virtuales de Azure en la [documentación de Azure](/azure/virtual-machines/windows/sizes-general).</span><span class="sxs-lookup"><span data-stu-id="31bd6-144">Detailed information about Azure VM types is available in the [Azure documentation](/azure/virtual-machines/windows/sizes-general).</span></span>

## <a name="samples-and-additional-resources"></a><span data-ttu-id="31bd6-145">Ejemplos y recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="31bd6-145">Samples and Additional Resources</span></span>

- [<span data-ttu-id="31bd6-146">Aplicaciones de ejemplo</span><span class="sxs-lookup"><span data-stu-id="31bd6-146">Sample applications</span></span>](https://github.com/microsoftgraph/microsoft-graph-comms-samples/tree/master/Samples/V1.0Samples/LocalMediaSamples)
- [<span data-ttu-id="31bd6-147">Documentación del SDK de llamadas de Graph</span><span class="sxs-lookup"><span data-stu-id="31bd6-147">Graph Calling SDK Documentation</span></span>](https://microsoftgraph.github.io/microsoft-graph-comms-samples/docs/)
