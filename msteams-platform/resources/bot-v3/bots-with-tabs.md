---
title: Combinar bots con pestañas
description: Describe cómo usar pestañas y bots juntos
keywords: equipos bots pestañas desarrollo
ms.topic: conceptual
localization_priority: Normal
ms.date: 03/15/2018
ms.openlocfilehash: 3273369ad1122355b792dc3d429c3a4eff7e1d47
ms.sourcegitcommit: 51e4a1464ea58c254ad6bd0317aca03ebf6bf1f6
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 05/19/2021
ms.locfileid: "52566456"
---
# <a name="combine-bots-with-tabs"></a><span data-ttu-id="42c52-104">Combinar bots con pestañas</span><span class="sxs-lookup"><span data-stu-id="42c52-104">Combine bots with tabs</span></span>

[!include[v3-to-v4-SDK-pointer](~/includes/v3-to-v4-pointer-bots.md)]

<span data-ttu-id="42c52-105">Los bots y las pestañas funcionan bien juntos y a menudo se combinan en un único servicio back-end.</span><span class="sxs-lookup"><span data-stu-id="42c52-105">Bots and tabs work well together, and are often combined into a single back-end service.</span></span> <span data-ttu-id="42c52-106">En esta sección se describen las prácticas recomendadas y los patrones comunes para usar pestañas y bots juntos.</span><span class="sxs-lookup"><span data-stu-id="42c52-106">This section describes best practices and common patterns for using tabs and bots together.</span></span>

## <a name="associating-user-identities-across-bot-and-tab"></a><span data-ttu-id="42c52-107">Asociación de identidades de usuario a través de bots y pestañas</span><span class="sxs-lookup"><span data-stu-id="42c52-107">Associating user identities across bot and tab</span></span>

<span data-ttu-id="42c52-108">Por ejemplo: supongamos que la aplicación de pestañas utiliza un sistema de ID propietario para proteger su contenido.</span><span class="sxs-lookup"><span data-stu-id="42c52-108">For example: Suppose your tab application uses a proprietary ID system to secure its content.</span></span> <span data-ttu-id="42c52-109">Supongamos que también tiene un bot que puede interactuar con el usuario.</span><span class="sxs-lookup"><span data-stu-id="42c52-109">Suppose you also have a bot that can interact with the user.</span></span> <span data-ttu-id="42c52-110">Normalmente, querrá mostrar contenido en la pestaña que es específica del usuario visual.</span><span class="sxs-lookup"><span data-stu-id="42c52-110">Typically, you’ll want to show content in the tab that is specific to the viewing user.</span></span> <span data-ttu-id="42c52-111">El desafío es que el ID de usuario en su sistema es probablemente diferente del ID de usuario Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="42c52-111">The challenge is that the user ID in your system is likely different from the Microsoft Teams user ID.</span></span> <span data-ttu-id="42c52-112">Entonces, ¿cómo asocias estas dos identidades?</span><span class="sxs-lookup"><span data-stu-id="42c52-112">So how do you associate these two identities?</span></span>
<span data-ttu-id="42c52-113">En general, el enfoque recomendado es iniciar sesión con el usuario con el bot utilizando el mismo sistema de identidad utilizado para proporcionar autenticación para el contenido de la pestaña.</span><span class="sxs-lookup"><span data-stu-id="42c52-113">In general, the recommended approach is to sign the user in with the bot using the same identity system used to provide authentication for the tab content.</span></span> <span data-ttu-id="42c52-114">Puede implementar esto a través de la acción de inicio de sesión, que normalmente inicia sesión en el usuario a través de un flujo OAuth.</span><span class="sxs-lookup"><span data-stu-id="42c52-114">You can implement this via the sign-in action, which typically logs in the user via an OAuth flow.</span></span>

<span data-ttu-id="42c52-115">Este flujo funciona mejor si el proveedor de identidades implementa el protocolo OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="42c52-115">This flow works best if your identity provider implements the OAuth 2.0 protocol.</span></span> <span data-ttu-id="42c52-116">A continuación, puede asociar el id. Teams de usuario con las credenciales del usuario desde su propio servicio de identidad.</span><span class="sxs-lookup"><span data-stu-id="42c52-116">You can then associate the Teams user ID with the user’s credentials from your own identity service.</span></span>

   ![Asociación de identidades](~/assets/images/bots/associating_contexts.png)

## <a name="constructing-deep-links-to-tabs-in-messages-from-your-bot"></a><span data-ttu-id="42c52-118">Construir vínculos profundos a pestañas en mensajes desde el bot</span><span class="sxs-lookup"><span data-stu-id="42c52-118">Constructing deep links to tabs in messages from your bot</span></span>

<span data-ttu-id="42c52-119">Es posible que desee utilizar pestañas para mostrar más contenido del que cabe dentro de una tarjeta o proporcionar una manera de completar tareas complejas de llenado de formularios mediante el lienzo de la pestaña.</span><span class="sxs-lookup"><span data-stu-id="42c52-119">You may want to use tabs to show more content than can fit inside of a card, or provide a way to complete complex form-filling tasks using the tab canvas.</span></span> <span data-ttu-id="42c52-120">Por ejemplo, considere la posibilidad de navegar por el usuario a la pestaña cuando haga clic en la tarjeta desde el bot.</span><span class="sxs-lookup"><span data-stu-id="42c52-120">For example, consider navigating the user to the tab when he or she clicks on the card from your bot.</span></span> <span data-ttu-id="42c52-121">Para que esto suceda, deberá codificar el mensaje del bot para incluir una dirección URL de [vínculo profundo,](~/concepts/build-and-test/deep-links.md) ya sea a través del marcado o como destino de la acción openUrl.</span><span class="sxs-lookup"><span data-stu-id="42c52-121">For this to happen, you’ll need to encode your bot’s message to include a [deep link](~/concepts/build-and-test/deep-links.md) URL, either through markup or as the target of the openUrl action.</span></span>

<span data-ttu-id="42c52-122">Los vínculos profundos se basan en un entityId, que es un valor opaco que se asigna a una entidad única en el sistema.</span><span class="sxs-lookup"><span data-stu-id="42c52-122">Deep links rely on an entityId, which is an opaque value that maps to a unique entity in your system.</span></span> <span data-ttu-id="42c52-123">Cuando se crea la pestaña, lo ideal es almacenar algún estado simple, por ejemplo, marcar en el back-end indicando que la pestaña se ha creado en el canal.</span><span class="sxs-lookup"><span data-stu-id="42c52-123">When the tab is created, you ideally store some simple state, For example, flag on your backend indicating the tab has been created in the channel.</span></span> <span data-ttu-id="42c52-124">Cuando el bot construye un mensaje, puede tener como destino el entityId asociado a esa pestaña.</span><span class="sxs-lookup"><span data-stu-id="42c52-124">When your bot constructs a message, it can target the entityId associated with that tab.</span></span>

> [!NOTE]
> <span data-ttu-id="42c52-125">en los chats personales, porque las pestañas son "estáticas" e instaladas con la aplicación, siempre se puede asumir su existencia y así construir vínculos profundos en consecuencia.</span><span class="sxs-lookup"><span data-stu-id="42c52-125">in personal chats, because tabs are “static” and installed with the app, you can always assume their existence and thus construct deep links accordingly.</span></span>

## <a name="sending-notifications-for-tab-updates"></a><span data-ttu-id="42c52-126">Envío de notificaciones para actualizaciones de pestañas</span><span class="sxs-lookup"><span data-stu-id="42c52-126">Sending notifications for tab updates</span></span>

<span data-ttu-id="42c52-127">A menudo querrá notificar al usuario final cada vez que se produzca una actualización o una acción de usuario en una pestaña. Un escenario de ejemplo es asignar una tarea o un ticket a un miembro del equipo y, a continuación, notificar a ese miembro del equipo.</span><span class="sxs-lookup"><span data-stu-id="42c52-127">Often you’ll want to notify the end user whenever an update or a user action occurs in a tab. An example scenario is assigning a task or ticket to a fellow team member and then notifying that team member.</span></span>

<span data-ttu-id="42c52-128">Hay dos maneras de lograr este escenario:</span><span class="sxs-lookup"><span data-stu-id="42c52-128">There are two ways of achieving this scenario:</span></span>

1. <span data-ttu-id="42c52-129">Si desea notificar a todo un canal, el bot puede publicar un mensaje de forma asincrónica en el canal.</span><span class="sxs-lookup"><span data-stu-id="42c52-129">If you wish to notify an entire channel your bot can asynchronously post a message to the channel.</span></span> <span data-ttu-id="42c52-130">No hay manera de que un bot cree proactivamente la conversación de la pestaña si no se creó con la pestaña.</span><span class="sxs-lookup"><span data-stu-id="42c52-130">There is no way for a bot to proactively create the tab conversation if it wasn't created with the tab.</span></span>

2. <span data-ttu-id="42c52-131">Si solo desea notificar al destinatario o a las partes interesadas involucradas en la acción, su bot puede enviar un mensaje de chat personal al usuario.</span><span class="sxs-lookup"><span data-stu-id="42c52-131">If you wish to only notify the recipient or interested parties involved with the action, your bot can send a personal chat message to the user.</span></span> <span data-ttu-id="42c52-132">Primero debe comprobar si existe una conversación personal entre el bot y el usuario.</span><span class="sxs-lookup"><span data-stu-id="42c52-132">You should first check to see if a personal conversation between your bot and the user exists.</span></span> <span data-ttu-id="42c52-133">Si no es así, puede llamar `CreateConversation` para iniciar el chat personal.</span><span class="sxs-lookup"><span data-stu-id="42c52-133">If not, you can call `CreateConversation` to initiate the personal chat.</span></span>

<span data-ttu-id="42c52-134">En ambos casos, utilice las notificaciones de eventos sabiamente y nunca envíe spam al usuario con actualizaciones innecesarias.</span><span class="sxs-lookup"><span data-stu-id="42c52-134">In both cases, use event notifications wisely and never spam the user with unnecessary updates.</span></span>
