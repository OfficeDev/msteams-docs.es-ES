---
title: Extensiones de mensajería
author: clearab
description: Información general sobre las extensiones de mensajería en la plataforma de Microsoft Teams
localization_priority: Normal
ms.topic: overview
ms.author: anclear
ms.openlocfilehash: fcd5661a2e0b601579fc5af843935d64ab487cef
ms.sourcegitcommit: 825abed2f8784d2bab7407ba7a4455ae17bbd28f
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/26/2021
ms.locfileid: "52020698"
---
# <a name="messaging-extensions"></a><span data-ttu-id="b6eb6-103">Extensiones de mensajería</span><span class="sxs-lookup"><span data-stu-id="b6eb6-103">Messaging extensions</span></span>

<span data-ttu-id="b6eb6-104">Las extensiones de mensajería permiten a los usuarios interactuar con el servicio web a través de botones y formularios en el cliente de Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-104">Messaging extensions allow the users to interact with your web service through buttons and forms in the Microsoft Teams client.</span></span> <span data-ttu-id="b6eb6-105">Pueden buscar o iniciar acciones en un sistema externo desde el área del mensaje de redacción, el cuadro de comandos o directamente desde un mensaje.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-105">They can search or initiate actions in an external system from the compose message area, the command box, or directly from a message.</span></span> <span data-ttu-id="b6eb6-106">Puedes devolver los resultados de esa interacción al cliente de Microsoft Teams en forma de tarjeta con un formato enriquecido.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-106">You can send back the results of that interaction to the Microsoft Teams client in the form of a richly formatted card.</span></span> <span data-ttu-id="b6eb6-107">En este documento se proporciona información general sobre la extensión de mensajería, las tareas realizadas en diferentes escenarios, el trabajo de la extensión de mensajería, la acción y los comandos de búsqueda y la desamuesación de vínculos.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-107">This document gives an overview of the messaging extension, tasks performed under different scenarios, working of messaging extension, action and search commands, and link unfurling.</span></span>

<span data-ttu-id="b6eb6-108">La siguiente imagen muestra las ubicaciones desde las que se invocan las extensiones de mensajería:</span><span class="sxs-lookup"><span data-stu-id="b6eb6-108">The following image displays the locations from where messaging extensions are invoked:</span></span>

![ubicaciones de invocación de extensión de mensajería](~/assets/images/messaging-extension-invoke-locations.png)

## <a name="scenarios-where-messaging-extensions-are-used"></a><span data-ttu-id="b6eb6-110">Escenarios en los que se usan extensiones de mensajería</span><span class="sxs-lookup"><span data-stu-id="b6eb6-110">Scenarios where messaging extensions are used</span></span>

| <span data-ttu-id="b6eb6-111">Escenario</span><span class="sxs-lookup"><span data-stu-id="b6eb6-111">Scenario</span></span> | <span data-ttu-id="b6eb6-112">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="b6eb6-112">Example</span></span> |
|:-----------------|:-----------------|
|<span data-ttu-id="b6eb6-113">Desea que algún sistema externo realice una acción y que el resultado de la acción se envíe de vuelta a la conversación.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-113">You want some external system to do an action  and the result of the action to be sent back to your conversation.</span></span>|<span data-ttu-id="b6eb6-114">Reserve un recurso y permita que el canal conozca la franja horaria reservada.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-114">Reserve a resource and allow the channel to know the reserved time slot.</span></span>|
|<span data-ttu-id="b6eb6-115">Desea encontrar algo en un sistema externo y compartir los resultados con la conversación.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-115">You want to find something in an external system, and share the results with the conversation.</span></span>|<span data-ttu-id="b6eb6-116">Busque un elemento de trabajo en Azure DevOps y compártelo con el grupo como una tarjeta adaptable.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-116">Search for a work item in Azure DevOps, and share it with the group as an Adaptive Card.</span></span>|
|<span data-ttu-id="b6eb6-117">Desea completar una tarea compleja que incluya varios pasos o mucha información en un sistema externo y compartir los resultados con una conversación.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-117">You want to complete a complex task involving multiple steps or lots of information in an external system, and share the results with a conversation.</span></span>|<span data-ttu-id="b6eb6-118">Crea un error en el sistema de seguimiento basado en un mensaje de Teams, asigna ese error a Bob y envía una tarjeta al hilo de conversación con los detalles del error.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-118">Create a bug in your tracking system based on a Teams message, assign that bug to Bob, and send a card to the conversation thread with the bug's details.</span></span>|

## <a name="understand-how-messaging-extensions-work"></a><span data-ttu-id="b6eb6-119">Comprender cómo funcionan las extensiones de mensajería</span><span class="sxs-lookup"><span data-stu-id="b6eb6-119">Understand how messaging extensions work</span></span>

<span data-ttu-id="b6eb6-120">Una extensión de mensajería consta de un servicio web que hospeda y un manifiesto de aplicación, que define desde dónde se invoca el servicio web en el cliente de Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-120">A messaging extension consists of a web service that you host and an app manifest, which defines where your web service is invoked from in the Microsoft Teams client.</span></span> <span data-ttu-id="b6eb6-121">El servicio web aprovecha el esquema de mensajería de Bot Framework y el protocolo de comunicación seguro, por lo que debe registrar el servicio web como bot en Bot Framework.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-121">The web service takes advantage of the Bot Framework's messaging schema and secure communication protocol, so you must register your web service as a bot in the Bot Framework.</span></span> 

> [!NOTE]
> <span data-ttu-id="b6eb6-122">Aunque puede crear el servicio web manualmente, use [bot Framework SDK](https://github.com/microsoft/botframework) para trabajar con el protocolo.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-122">Though you can create the web service manually, use [Bot Framework SDK](https://github.com/microsoft/botframework) to work with the protocol.</span></span>

<span data-ttu-id="b6eb6-123">En el manifiesto de la aplicación para la aplicación de Microsoft Teams, se define una sola extensión de mensajería con hasta diez comandos diferentes.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-123">In the app manifest for Microsoft Teams app, a single messaging extension is defined with up to ten different commands.</span></span> <span data-ttu-id="b6eb6-124">Cada comando define un tipo, como acción o búsqueda, y las ubicaciones del cliente desde donde se invoca.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-124">Each command defines a type, such as action or search and the locations in the client from where it is invoked.</span></span> <span data-ttu-id="b6eb6-125">Las ubicaciones de invocación son área de mensaje de redacción, barra de comandos y mensaje.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-125">The invoke locations are compose message area, command bar, and message.</span></span> <span data-ttu-id="b6eb6-126">Al invocar, el servicio web recibe un mensaje HTTPS con una carga JSON que incluye toda la información relevante.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-126">On invoke, the web service receives an HTTPS message with a JSON payload including all the relevant information.</span></span> <span data-ttu-id="b6eb6-127">Responda con una carga JSON, lo que permite al cliente de Teams conocer la siguiente interacción que se habilitará.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-127">Respond with a JSON payload, allowing the Teams client to know the next interaction to enable.</span></span> 

## <a name="types-of-messaging-extension-commands"></a><span data-ttu-id="b6eb6-128">Tipos de comandos de extensión de mensajería</span><span class="sxs-lookup"><span data-stu-id="b6eb6-128">Types of messaging extension commands</span></span>

<span data-ttu-id="b6eb6-129">Hay dos tipos de comandos de extensión de mensajería, comando de acción y comando de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-129">There are two types of messaging extension commands, action command and search command.</span></span> <span data-ttu-id="b6eb6-130">El tipo de comando de extensión de mensajería define los elementos de la interfaz de usuario y los flujos de interacción disponibles para el servicio web.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-130">The messaging extension command type defines the UI elements and interaction flows available to your web service.</span></span> <span data-ttu-id="b6eb6-131">Algunas interacciones, como la autenticación y la configuración, están disponibles para ambos tipos de comandos.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-131">Some interactions, such as authentication and configuration are available for both types of commands.</span></span>

### <a name="action-commands"></a><span data-ttu-id="b6eb6-132">Comandos de acción</span><span class="sxs-lookup"><span data-stu-id="b6eb6-132">Action commands</span></span>

<span data-ttu-id="b6eb6-133">Los comandos action se usan para presentar a los usuarios un elemento emergente modal para recopilar o mostrar información.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-133">Action commands are used to present the users with a modal popup to collect or display information.</span></span> <span data-ttu-id="b6eb6-134">Cuando el usuario envía el formulario, el servicio web responde insertando un mensaje en la conversación directamente o insertando un mensaje en el área del mensaje de redacción.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-134">When the user submits the form, your web service responds by inserting a message into the conversation directly or by inserting a message into the compose message area.</span></span> <span data-ttu-id="b6eb6-135">Después, el usuario puede enviar el mensaje.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-135">After that the user can submit the message.</span></span> <span data-ttu-id="b6eb6-136">Puede encadenar varios formularios para flujos de trabajo más complejos.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-136">You can chain multiple forms together for more complex workflows.</span></span>

<span data-ttu-id="b6eb6-137">Los comandos de acción se desencadenan desde el área del mensaje de redacción, el cuadro de comandos o desde un mensaje.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-137">The action commands are triggered from the compose message area, the command box, or from a message.</span></span> <span data-ttu-id="b6eb6-138">Cuando se invoca el comando desde un mensaje, la carga JSON inicial enviada al bot incluye todo el mensaje desde el que se invocó.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-138">When the command is invoked from a message, the initial JSON payload sent to your bot includes the entire message it was invoked from.</span></span> <span data-ttu-id="b6eb6-139">En la siguiente imagen se muestra el módulo de tareas de comando de acción de extensión de mensajería: módulo de tareas de comando de acción de extensión ![ de mensajería](~/assets/images/task-module.png)</span><span class="sxs-lookup"><span data-stu-id="b6eb6-139">The following image displays the messaging extension action command task module: ![messaging extension action command task module](~/assets/images/task-module.png)</span></span>

### <a name="search-commands"></a><span data-ttu-id="b6eb6-140">Comandos de búsqueda</span><span class="sxs-lookup"><span data-stu-id="b6eb6-140">Search commands</span></span>

<span data-ttu-id="b6eb6-141">Los comandos de búsqueda permiten a los usuarios buscar información en un sistema externo manualmente a través de un cuadro de búsqueda o pegando un vínculo a un dominio supervisado en el área del mensaje de redacción e insertar los resultados de la búsqueda en un mensaje.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-141">Search commands allow the users to search an external system for information either manually through a search box, or by pasting a link to a monitored domain into the compose message area, and insert the results of the search into a message.</span></span> <span data-ttu-id="b6eb6-142">En el flujo de comandos de búsqueda más básico, el mensaje de invocación inicial incluye la cadena de búsqueda que el usuario envió.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-142">In the most basic search command flow, the initial invoke message includes the search string that the user submitted.</span></span> <span data-ttu-id="b6eb6-143">Responderá con una lista de tarjetas y vistas previas de tarjetas.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-143">You respond with a list of cards and card previews.</span></span> <span data-ttu-id="b6eb6-144">El cliente de Teams representa una lista de vistas previas de tarjeta para el usuario.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-144">The Teams client renders a list of card previews for the user.</span></span> <span data-ttu-id="b6eb6-145">Cuando el usuario selecciona una tarjeta de la lista, la tarjeta de tamaño completo se inserta en el área del mensaje de redacción.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-145">When the user selects a card from the list, the full-size card is inserted into the compose message area.</span></span>

<span data-ttu-id="b6eb6-146">Las tarjetas se desencadenan desde el área del mensaje de redacción o el cuadro de comando y no se desencadenan desde un mensaje.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-146">The cards are triggered from the compose message area or the command box and not triggered from a message.</span></span> <span data-ttu-id="b6eb6-147">No se pueden desencadenar desde un mensaje.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-147">They can not be triggered from a message.</span></span>
<span data-ttu-id="b6eb6-148">En la siguiente imagen se muestra el módulo de tareas de comando de búsqueda de extensión de mensajería:</span><span class="sxs-lookup"><span data-stu-id="b6eb6-148">The following image displays the messaging extension search command task module:</span></span>

![comando de búsqueda de extensión de mensajería](~/assets/images/search-extension.png)

> [!NOTE]
> <span data-ttu-id="b6eb6-150">Para obtener más información sobre las tarjetas, vea [what are cards](../task-modules-and-cards/what-are-cards.md).</span><span class="sxs-lookup"><span data-stu-id="b6eb6-150">For more information on cards, see [what are cards](../task-modules-and-cards/what-are-cards.md).</span></span>

## <a name="link-unfurling"></a><span data-ttu-id="b6eb6-151">Apertura de vínculos</span><span class="sxs-lookup"><span data-stu-id="b6eb6-151">Link unfurling</span></span>

<span data-ttu-id="b6eb6-152">Se invoca un servicio web cuando se pega una dirección URL en el área del mensaje de redacción.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-152">A web service is invoked when a URL is pasted in the compose message area.</span></span> <span data-ttu-id="b6eb6-153">Esta funcionalidad se conoce como desenlaznado de vínculos.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-153">This functionality is known as link unfurling.</span></span> <span data-ttu-id="b6eb6-154">Puede suscribirse para recibir una invocación cuando las direcciones URL que contienen un dominio determinado se pegan en el área del mensaje de redacción.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-154">You can subscribe to receive an invoke when URLs containing a particular domain are pasted into the compose message area.</span></span> <span data-ttu-id="b6eb6-155">El servicio web puede "desplegar" la dirección URL en una tarjeta detallada, lo que proporciona más información que la tarjeta de vista previa del sitio web estándar.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-155">Your web service can "unfurl" the URL into a detailed card, providing more information than the standard website preview card.</span></span> <span data-ttu-id="b6eb6-156">Puedes agregar botones para permitir que los usuarios tomen medidas inmediatamente sin salir del cliente de Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-156">You can add buttons to allow the users to immediately take action without leaving the Microsoft Teams client.</span></span>
<span data-ttu-id="b6eb6-157">Las siguientes imágenes muestran la característica de desamuestración de vínculos cuando se pega un vínculo en la extensión de mensajería:</span><span class="sxs-lookup"><span data-stu-id="b6eb6-157">The following images display link unfurling feature when a link is pasted in messaging extension:</span></span>
 
![vínculo unfurl](../assets/images/messaging-extension/unfurl-link.png)

![desafusado de vínculos](../assets/images/messaging-extension/link-unfurl.gif)

## <a name="code-sample"></a><span data-ttu-id="b6eb6-160">Ejemplo de código</span><span class="sxs-lookup"><span data-stu-id="b6eb6-160">Code sample</span></span>

| <span data-ttu-id="b6eb6-161">**Nombre de ejemplo**</span><span class="sxs-lookup"><span data-stu-id="b6eb6-161">**Sample name**</span></span> | <span data-ttu-id="b6eb6-162">**Description**</span><span class="sxs-lookup"><span data-stu-id="b6eb6-162">**Description**</span></span> | <span data-ttu-id="b6eb6-163">**.NET**</span><span class="sxs-lookup"><span data-stu-id="b6eb6-163">**.NET**</span></span> | <span data-ttu-id="b6eb6-164">**Node.js**</span><span class="sxs-lookup"><span data-stu-id="b6eb6-164">**Node.js**</span></span> | <span data-ttu-id="b6eb6-165">**Python**</span><span class="sxs-lookup"><span data-stu-id="b6eb6-165">**Python**</span></span> |
|------------|-------------|----------------|------------|
| <span data-ttu-id="b6eb6-166">Extensión de mensajería con comandos basados en acciones</span><span class="sxs-lookup"><span data-stu-id="b6eb6-166">Messaging extension with action-based commands</span></span> | <span data-ttu-id="b6eb6-167">En este ejemplo se muestra cómo crear una extensión de mensajería basada en acciones.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-167">This sample illustrates how to build an action-based messaging extension.</span></span> | [<span data-ttu-id="b6eb6-168">View</span><span class="sxs-lookup"><span data-stu-id="b6eb6-168">View</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/csharp_dotnetcore/51.teams-messaging-extensions-action) | [<span data-ttu-id="b6eb6-169">View</span><span class="sxs-lookup"><span data-stu-id="b6eb6-169">View</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/javascript_nodejs/51.teams-messaging-extensions-action) | [<span data-ttu-id="b6eb6-170">View</span><span class="sxs-lookup"><span data-stu-id="b6eb6-170">View</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/main/samples/python/51.teams-messaging-extensions-action) |
| <span data-ttu-id="b6eb6-171">Extensión de mensajería con comandos basados en búsqueda</span><span class="sxs-lookup"><span data-stu-id="b6eb6-171">Messaging extension with search-based commands</span></span> | <span data-ttu-id="b6eb6-172">En este ejemplo se muestra cómo crear una extensión de mensajería basada en búsquedas.</span><span class="sxs-lookup"><span data-stu-id="b6eb6-172">This sample illustrates how to build a Search-based Messaging Extension.</span></span> | [<span data-ttu-id="b6eb6-173">View</span><span class="sxs-lookup"><span data-stu-id="b6eb6-173">View</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/csharp_dotnetcore/50.teams-messaging-extensions-search) | [<span data-ttu-id="b6eb6-174">View</span><span class="sxs-lookup"><span data-stu-id="b6eb6-174">View</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/javascript_nodejs/50.teams-messaging-extensions-search) | [<span data-ttu-id="b6eb6-175">View</span><span class="sxs-lookup"><span data-stu-id="b6eb6-175">View</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/main/samples/python/50.teams-messaging-extension-search) |

## <a name="see-also"></a><span data-ttu-id="b6eb6-176">Consulte también</span><span class="sxs-lookup"><span data-stu-id="b6eb6-176">See also</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="b6eb6-177">Crear una extensión de mensajería</span><span class="sxs-lookup"><span data-stu-id="b6eb6-177">Create a messaging extension</span></span>](../build-your-first-app/build-messaging-extension.md)


## <a name="next-step"></a><span data-ttu-id="b6eb6-178">Paso siguiente</span><span class="sxs-lookup"><span data-stu-id="b6eb6-178">Next step</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="b6eb6-179">Definir comando de extensión de mensajería de acción</span><span class="sxs-lookup"><span data-stu-id="b6eb6-179">Define action messaging extension command</span></span>](~/messaging-extensions/how-to/action-commands/define-action-command.md)

> [!div class="nextstepaction"]
> [<span data-ttu-id="b6eb6-180">Definir comando de extensión de mensajería de búsqueda</span><span class="sxs-lookup"><span data-stu-id="b6eb6-180">Define search messaging extension command</span></span>](~/messaging-extensions/how-to/search-commands/define-search-command.md)
