### YamlMime:Tutorial
title: Crear Teams bot de conversación
metadata:
  title: Crear Teams bot de conversación
  description: En este tutorial, aprenderás a configurar el bot de conversación en Teams.
  audience: Developer
  level: Beginner
  ms.date: 04/01/2022
  ms.topic: interactive-tutorial
  nextTutorialHref: bots/how-to/conversations/channel-and-group-conversations.md
  nextTutorialTitle: Canal y conversaciones de chat de grupo con un bot
  ms.custom: mvc
  ms.localizationpriority: none
  ms.openlocfilehash: 7bdb662ef322edf1e635d84593be66d8946874ee
  ms.sourcegitcommit: a85b4ae65b87006bb2e2e50ea902eb97291e83a8
  ms.translationtype: MT
  ms.contentlocale: es-ES
  ms.lasthandoff: 04/01/2022
  ms.locfileid: "64612823"
items:
- durationInMinutes: 1
  content: >
    Teams bots de conversación permiten a los usuarios interactuar con el servicio web a través de texto, tarjetas interactivas y módulos de tareas. Las conversaciones básicas se controlan a través del conector de Bot Framework, una única API de REST. Esta API permite que el bot se comunique con Teams y otros canales. El SDK de Bot Builder proporciona las siguientes características:


    * Fácil acceso al conector de Bot Framework.

    * Funcionalidad adicional para administrar el estado y el flujo de conversación.

    * Formas sencillas de incorporar servicios cognitivos, como el procesamiento de lenguaje natural (NLP).


    Cuando el bot se agrega por primera vez a un grupo o equipo, se envía un mensaje de introducción. El mensaje proporciona una breve descripción de las características del bot y cómo usarlas.


    Esta guía paso a paso le ayuda a crear bots de conversación básicos en la Teams aplicación. Verá el resultado siguiente:


    :::image type="content" source="./assets/images/conversation-bot/final-output.png" alt-text="Salida final." border="true"lightbox="assets/images/conversation-bot/final-output.png":::
- title: Requisitos previos
  durationInMinutes: 1
  content: >
    Para configurar el entorno de desarrollo, instale las siguientes herramientas:


    * [Office 365 inquilino](https://developer.microsoft.com/en-us/microsoft-365/dev-program)

    * [Ngrok o](https://ngrok.com/) una solución de túnel equivalente

    * Versión más reciente de [Visual Studio](https://visualstudio.microsoft.com/downloads/)

    * [SDK de .NET Core versión 3.1](https://dotnet.microsoft.com/en-us/download)

    * Microsoft Teams y una cuenta Teams cuenta
- title: Configurar bot de conversación
  durationInMinutes: 5
  content: "Registre el bot con el servicio de bots de Azure al desarrollarlo y hospedarlo en Azure. Realice los siguientes pasos:\n\n1. Use ngrok para crear un túnel a los puntos de conexión del servidor web.\n1. Cree el registro del canal de bot en la cuenta de Azure.\n1. Cree un secreto de cliente que permita la autenticación sso del bot.\n1. Agregar permisos de API para llamadas descendentes.\n1. Agregue el punto de conexión de mensajería al túnel ngrok que creó.\n1. Agregue Microsoft Teams para implementar el bot en un canal Teams.\n\n**Crear túnel ngrok**\n\nUse ngrok para crear un túnel para los puntos de conexión HTTPS del servidor web que se ejecuta localmente. Ejecute el siguiente comando en ngrok:\n\n```bash\nngrok http -host-header=rewrite 3978\n```\n\n**Crear registro del canal bot en la cuenta de Azure**\n\n1. Acceda al [Azure Portal](https://portal.azure.com/).\n1. Elija **Crear un recurso**.\n1. Busque **Bot de Azure** en el cuadro de búsqueda.\n1. Seleccione **Bot de Azure**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/azure-bot.png\" alt-text=\"Bot de Azure.\":::\n\n1. Seleccione **Crear**.\n1. Escriba el nombre del controlador del **bot en el campo Detección de** bots.\n1. Selecciona tu **suscripción** en la lista desplegable.\n1. Selecciona el **grupo De recursos** de la lista desplegable.\n\n    Para crear un nuevo grupo de recursos, seleccione **Crear** nuevo, escriba el nombre del recurso, seleccione **Aceptar** y seleccione ubicación necesaria en La lista desplegable Nueva ubicación **del grupo de** recursos.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/create-azure-bot.png\" alt-text=\"Crear bot de azure.\":::\n\n1. Selecciona **Tipo de aplicación como** **multiinquilino** para **id. de aplicación de Microsoft**.\n\n    > [!NOTE]\n    > En **la sección Tipo de** creación de Id. de aplicación de Microsoft, Ya está seleccionado **Crear nuevo identificador de aplicación de Microsoft** para crear un nuevo bot. También puedes seleccionar **Usar el registro de aplicaciones existente**, si ya has registrado un bot. Escribe El id. de aplicación de Microsoft en **el campo Id. de** aplicación existente y escribe el valor en **El campo Contraseña de la aplicación** existente.\n\n1. Seleccione **Revisar y crear**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/review-create.png\" alt-text=\"Revisar y crear.\":::\n\n1. Seleccione **Crear**, si la validación pasa. El servicio de bots tarda unos minutos en aprovisionarse.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/validation-passed.png\" alt-text=\"Validación del bot.\":::\n\n1. Seleccione **Ir a recursos**. El bot y los recursos relacionados se enumeran en el grupo de recursos.\n\n    Ahora se ha creado el bot de Azure.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/go-to-resource.png\" alt-text=\"Vaya a la tarjeta de recursos.\":::\n\n**Para crear un secreto de cliente**\n\n1. En **Configuración**, seleccione **Configuración**. Guarde el **id. de aplicación de Microsoft** (id. de cliente) para la referencia futura.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/microsoft-app-id.png\" alt-text=\"Id. de aplicación de Microsoft.\":::\n\n1. Selecciona **Administrar** junto a **Id. de aplicación de Microsoft**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/manage-bot-label.png\" alt-text=\"Administrar etiqueta.\":::\n\n1. En la **sección Secretos de** cliente, seleccione **Nuevo secreto de cliente**. Aparecerá **la ventana Agregar un secreto de** cliente.  \n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/new-client-secret.png\" alt-text=\"Nuevo secreto de cliente.\":::\n\n1. Escriba **Descripción** y seleccione **Agregar**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/add-client-secret.png\" alt-text=\"Agregar secreto de cliente.\":::\n\n1. Seleccione **Copiar en el Portapapeles** en la **columna** Valor y guarde el identificador de secreto de cliente para la referencia futura.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/value.png\" alt-text=\"Tarjeta de valor.\":::\n\n**Para agregar permisos de API para llamadas descendentes**\n\n1. En **el panel** Administrar del bot, seleccione **Permisos de API**.\n1. Seleccione **Agregar un permiso** **Aparece la ventana Solicitar permisos de la API** .\n1. Seleccione **API de Microsoft y** seleccione **Microsoft Graph**.\n1. Seleccione **Permisos de aplicación y** , a continuación, seleccione permisos.\n1. Agregue los permisos de usuario que la aplicación necesite para las API descendentes, por ejemplo, `User.Read`.\n1. Seleccione **Agregar permisos**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/api-permissions.png\" alt-text=\"Agregar permisos de API.\" border=\"true\"lightbox=\"assets/images/conversation-bot/api-permissions.png\":::\n\n**Para agregar punto de conexión de mensajería**\n\n1. Vaya a **la página** principal del bot y seleccione **Configuración** en **Configuración** desde el panel izquierdo.\n1. Vaya a ngrok.\n1. Copie la dirección URL HTTPS (https a io) como se muestra en la siguiente imagen:\n    \n    :::image type=\"content\" source=\"./assets/images/conversation-bot/ngrok.png\" alt-text=\"Ngrok.\":::\n\n1. En **El extremo de** mensajería, agregue la dirección URL HTTPS disponible desde ngrok y al final de la dirección URL agregue **/api/messages**.\n    \n    :::image type=\"content\" source=\"./assets/images/conversation-bot/messaging-endpoint.png\" alt-text=\"Extremo de mensajería.\":::\n\n1. Seleccione **Aplicar**.\n\n**Para agregar el Microsoft Teams canal**\n\n1. Vaya a **Inicio**.\n1. En la **sección Recursos** recientes, abra el bot.\n1. Seleccione **Canales** en el panel izquierdo y **seleccione Microsoft Teams** <img src=\"~/assets/images/conversation-bot/teamsicon.png\" alt=\"Teams icon\" width=\"20\"/> de la lista de canales disponibles.    \n    \n    :::image type=\"content\" source=\"./assets/images/conversation-bot/channels-teams.png\" alt-text=\"Seleccione Teams.\":::\n\n1. Active la casilla para aceptar los términos del servicio y seleccione **Aceptar**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/terms-of-service.png\" alt-text=\"Términos de servicio.\":::\n\n1. Seleccione **Guardar**.\n\n    Ha configurado correctamente un bot en Azure Bot Service y ahora necesita configurar la conexión de servicio de bots.\n"
- title: Configurar la conexión de servicio de bot
  durationInMinutes: 1
  content: "Configure el ejemplo de bot para comprender cómo autenticar el bot de conversación en Microsoft Teams crear el paquete de la aplicación Teams y cargarlo en la organización.\n\n1. Actualice appsettings.json en Visual Studio.\n1. Actualice manifest.json en Visual Studio y comprimalo en el archivo zip de la Explorador de archivos.\n1. Ejecute la solución en Visual Studio.\n1. Upload el bot para Teams.\n\n**Actualizar appsettings para bot de conversación**\n\n1. Vaya al repositorio https://github.com/Microsoft/botbuilder-samples.git.\n1. Seleccione **Código** y seleccione la lista desplegable.\n1. Seleccione **Descargar ZIP**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/repo.png\" alt-text=\"Clonación de repositorios.\":::\n\n1. Asegúrese de tener en cuenta la ruta de acceso del repositorio que descargó.\n1. En el **Explorador de archivos**, vaya a **botbuilder-samplessamples** >  >  **csharp_dotnetcore** >  **57.teams-conversation-bot**.\n1. Abra el **archivo appsettings.json** en Visual Studio y actualice la configuración del bot.\n\n    * Agregue el nombre del bot para `MicrosoftAppType`.\n    * Puede obtener la de `MicrosoftAppId` la página de configuración del bot. Es `MicrosoftAppPassword` el valor del identificador secreto de cliente que guardó anteriormente.\n    * Puede obtener el vínculo `MicrosoftAppTenantId` o `UserId` del vínculo de la cuenta usada para iniciar sesión en el Teams. Siga la ruta de acceso de la imagen para obtener el vínculo de `tenant id`:\n    \n        :::image type=\"content\" source=\"./assets/images/conversation-bot/teams-link-new.png\" alt-text=\"Ruta de acceso de identificador de inquilino Teams.\":::\n\n        :::image type=\"content\" source=\"./assets/images/conversation-bot/tenant-id.png\" alt-text=\"Copie Teams vínculo.\":::\n\n        Copie el identificador de inquilino de la dirección URL.\n\n        :::image type=\"content\" source=\"./assets/images/conversation-bot/url-tenantid.png\" alt-text=\"TenantID.\":::\n\n1. Seleccione **Guardar**.    \n    \n    :::image type=\"content\" source=\"./assets/images/conversation-bot/appsettings.png\" alt-text=\"Appsettings Json.\":::\n\n**Para actualizar el manifiesto**\n\n1. En el **Explorador de archivos**, vaya a **botbuilder-samplessamples** >  >  **csharp_dotnetcore** >  **57.teams-conversation-botTeamsAppManifest** > .\n1. Abra el **archivo manifest.json** en Visual Studio.\n1. En el **archivo manifest.json** , busque **{id}, {botId}** y agregue el id. de aplicación de Microsoft.\n1. Agregue la dirección URL de ngrok **en validDomains** excluyendo `https://` y guardando.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/manifest.png\" alt-text=\"Manifiesto.\":::\n\n1. Zip the contents of the **TeamsAppManifest** folder to create **manifest.zip**.\n\n    > [!NOTE]\n    > No `manifest.zip` debe contener carpetas adicionales. Debe tener el archivo `manifest json` de origen, `color` el icono y el `outline` icono dentro de la carpeta zip.\n    > Ejecute la solución en Visual Studio y cargue el manifiesto en su inquilino de demostración para la organización o su Teams cuenta.\n\n**Para ejecutar la solución en Visual Studio**\n\n1. Abra Visual Studio.\n1. Seleccione **Archivo y** **Abrir**.\n1. Seleccione **Project/Solución** para abrir el `.csproj` archivo desde el Explorador de archivos.\n1. Vaya **a botbuilder-samplessamples** >  >  **csharp_dotnetcore** >  **57.teams-conversation-bot**.\n1. Seleccione `TeamsConversationBot.csproj` archivo y seleccione el bot en la **lista Proyectos de** inicio.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/visual-studio.png\" alt-text=\"Visual Studio depuración.\":::\n\n1. Seleccione F5 para depurar. Recibirás una pantalla de confirmación cuando el bot esté listo.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/bot.png\" alt-text=\"Pantalla lista para bots.\":::\n\n**Para cargar la aplicación en Teams**\n\n1. Vaya a Teams.\n1. Para cargar **manifest.zip**, selecciona Store **> Administrar** tus aplicaciones > Upload una aplicación personalizada ymanifest.zipdesde el repositorio en Explorador de archivos.****\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/upload-manifest.png\" alt-text=\"Carga de manifiesto en Teams.\":::\n\n1. Seleccione **Agregar para** instalar el bot de conversación en Teams.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/add-app-teams.png\" alt-text=\"Agregar aplicación a Teams.\":::\n\n    Ahora puedes interactuar con este bot.\n"
- title: Interacción con el bot de conversación
  durationInMinutes: 2
  content: >
    Puede interactuar con el bot en Teams enviándole un mensaje o seleccionando un comando de la lista de comandos. El bot responde a las siguientes cadenas:


    En el panel izquierdo de la Teams, seleccione los puntos suspensivos y, a continuación, seleccione la aplicación en la lista. El bot muestra **sugerencias de** la siguiente manera:


    :::image type="content" source="./assets/images/conversation-bot/suggestions.png" alt-text="Tarjeta sugerencias.":::


    | MentionMe    | Mostrar bienvenida   | MessageAllMembers |

    | --- | --- | --- |

    | :::image type="content" source="./assets/images/conversation-bot/mentionme-new.png" alt-text="Tarjeta Mentionme" border="true"lightbox="assets/images/conversation-bot/mentionme-new.png"::: | :::image type="content" source="./assets/images/conversation-bot/show-welcome-new.png" alt-text="Mostrar tarjeta de bienvenida" border="true"lightbox="assets/images/conversation-bot/show-welcome-new.png"::: | :::image type="content" source="./assets/images/conversation-bot/message-all-members-new.png" alt-text="Tarjeta MessageAllMembers" border="true"lightbox="assets/images/conversation-bot/message-all-members-new.png"::: |

    | **Resultado:** El bot responde al mensaje y menciona al usuario. | **Resultado:** El bot envía la tarjeta de bienvenida con la que interactuar. |  **Resultado:** El bot envía un mensaje uno a uno a cada miembro de la conversación actual. |

    | **Ámbitos válidos:** personal, chat de grupo, chat de grupo. | **Ámbitos válidos:** personal, chat de grupo, chat de grupo. |  **Ámbitos válidos:** personal, chat de grupo, chat de grupo. |


    Puede seleccionar una opción de la lista de comandos escribiendo **@TeamsConversationBot** en el área del mensaje de redacción y ¿Qué puedo **hacer?** texto encima del área de redacción.
- title: Desafío completo
  durationInMinutes: 1
  content: >
    ¿Has llegado a algo como esto?


    :::image type="content" source="./assets/images/conversation-bot/final-output.png" alt-text="Salida final." border="true"lightbox="assets/images/conversation-bot/final-output.png":::
- content: Has completado el tutorial para empezar con el bot de conversación para Microsoft Teams.
