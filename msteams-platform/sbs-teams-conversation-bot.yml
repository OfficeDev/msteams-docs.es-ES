### YamlMime:Tutorial
title: Creación de un bot de conversación de Teams
metadata:
  title: Creación de un bot de conversación de Teams
  description: Con este módulo de aprendizaje, aprenderá a crear un bot de conversación básico en la aplicación Microsoft Teams.
  audience: Developer
  level: Beginner
  ms.date: 04/01/2022
  ms.topic: interactive-tutorial
  nextTutorialHref: bots/how-to/conversations/channel-and-group-conversations.md
  nextTutorialTitle: Canal y conversaciones de chat de grupo con un bot
  ms.custom: mvc
  ms.localizationpriority: none
  ms.openlocfilehash: 0af16c0d1abfe77ba6ccb3b7c4fa45b9588b5d38
  ms.sourcegitcommit: 4eeede81a0ae8ec985c6a1ad4f608df58371402f
  ms.translationtype: MT
  ms.contentlocale: es-ES
  ms.lasthandoff: 07/14/2022
  ms.locfileid: "66792960"
items:
- durationInMinutes: 1
  content: >
    Los bots de conversación de Teams permiten a los usuarios interactuar con el servicio web a través de texto, tarjetas interactivas y módulos de tareas. Las conversaciones básicas se controlan a través del conector de Bot Framework, una única API REST. Esta API permite que el bot se comunique con Teams y otros canales. El SDK de Bot Builder proporciona las siguientes características:


    * Fácil acceso al conector de Bot Framework.

    * Funcionalidad adicional para administrar el flujo y el estado de la conversación.

    * Formas sencillas de incorporar servicios cognitivos, como el procesamiento de lenguaje natural (NLP).


    Cuando el bot se agrega por primera vez a un grupo o equipo, se envía un mensaje de introducción. El mensaje proporciona una breve descripción de las características del bot y cómo usarlas.


    Esta guía paso a paso le ayuda a crear un bot de conversación básico en la aplicación Teams. Verá la siguiente salida:


    :::image type="content" source="./assets/images/conversation-bot/final-output.png" alt-text="Salida final."lightbox="assets/images/conversation-bot/final-output.png":::
- title: Requisitos previos
  durationInMinutes: 1
  content: >
    Para configurar el entorno de desarrollo, instale las herramientas siguientes:


    * [inquilino de Office 365](https://developer.microsoft.com/en-us/microsoft-365/dev-program)

    * [Ngrok](https://ngrok.com/) o una solución de tunelización equivalente

    * Versión más reciente de [Visual Studio](https://visualstudio.microsoft.com/downloads/)

    * [SDK de .NET Core versión 3.1](https://dotnet.microsoft.com/en-us/download)

    * Microsoft Teams y una cuenta de Teams
- title: Configuración del bot de conversación
  durationInMinutes: 5
  content: "Registre el bot con Azure Bot Service al desarrollarlo y hospedarlo en Azure. Realice los siguientes pasos:\n\n1. Use ngrok para crear un túnel a los puntos de conexión del servidor web.\n1. Cree el registro del canal de bot en la cuenta de Azure.\n1. Cree un secreto de cliente que habilite la autenticación sso del bot.\n1. Agregue permisos de API para las llamadas de nivel inferior.\n1. Agregue el punto de conexión de mensajería al túnel ngrok que ha creado.\n1. Agregue el canal de Microsoft Teams para implementar el bot en un canal de Teams.\n\n**Creación de un túnel ngrok**\n\nUse ngrok para crear un túnel para los puntos de conexión HTTPS disponibles públicamente del servidor web en ejecución local. Ejecute el siguiente comando en ngrok:\n\n```bash\nngrok http -host-header=rewrite 3978\n```\n\n**Creación de un registro de canal de bot en una cuenta de Azure**\n\n1. Acceda al [Azure Portal](https://portal.azure.com/).\n1. Elija **Crear un recurso**.\n1. Busque **Azure Bot** en el cuadro de búsqueda.\n1. Seleccione **Bot de Azure**.\n\n    :::image type=\"content\" source=\"./assets/images/azure-bot.png\" alt-text=\"Bot de Azure.\":::\n\n1. Seleccione **Crear**.\n1. Escriba el nombre del identificador del bot en el campo **Identificador de bot**.\n1. Seleccione su **Suscripción** en la lista desplegable.\n1. Seleccione el **Grupo de recursos** en la lista desplegable.\n\n    Para crear un nuevo grupo de recursos, seleccione **Crear nuevo**, escriba el nombre del recurso, seleccione **Aceptar** y seleccione la ubicación necesaria en la lista desplegable **Nueva ubicación del grupo de recursos** .\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/create-azure-bot.png\" alt-text=\"Creación de un bot de Azure.\":::\n\n1. Seleccione **Tipo de aplicación** como **Multiinquilino** para el **Identificador de aplicación de Microsoft**.\n\n    > [!NOTE]\n    > En **la sección Creación de tipo** de id. de aplicación de Microsoft, ya está seleccionada **la opción Crear nuevo identificador de aplicación de Microsoft** para crear un nuevo bot. También puede seleccionar **Usar el registro de aplicaciones existente**, si ya ha registrado un bot. Escriba Microsoft App ID en **el campo Existing app id (Id. de aplicación existente** ) y escriba el valor en **el campo Existing app password (Contraseña de aplicación existente** ).\n\n1. Seleccione **Revisar y crear**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/review-create.png\" alt-text=\"Revisar y crear.\":::\n\n1. Seleccione **Crear**, si se supera la validación. El servicio de bot tarda unos minutos en aprovisionarse.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/validation-passed.png\" alt-text=\"Validación del bot.\":::\n\n1. Seleccione **Ir a recursos**. El bot y los recursos relacionados aparecen en el grupo de recursos.\n\n    Ahora se ha creado el bot de Azure.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/go-to-resource.png\" alt-text=\"Vaya a la tarjeta de recursos.\":::\n\n**Para crear un secreto de cliente**\n\n1. En **Configuración**, seleccione **Configuración**. Guarde el **identificador de aplicación de Microsoft** (id. de cliente) para futuras referencias.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/microsoft-app-id.png\" alt-text=\"Identificador de aplicación de Microsoft.\":::\n\n1. Seleccione **Administrar** adyacente al **identificador de aplicación de Microsoft**.\n\n   :::image type=\"content\" source=\"~/assets/images/manage-bot-label.png\" alt-text=\"administrar bot\":::\n\n1. En la sección **Secretos de cliente** , seleccione **Nuevo secreto de cliente**. Aparece **la ventana Agregar un secreto de cliente** .  \n\n    :::image type=\"content\" source=\"./assets/images/meetings-side-panel/newclientsecret.png\" alt-text=\"Nuevo secreto de cliente.\":::\n\n1. Escriba **Descripción** y seleccione **Agregar**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/add-client-secret.png\" alt-text=\"Agregar secreto de cliente.\":::\n\n1. Seleccione **Copiar en el Portapapeles** en la columna **Valor** y guarde el identificador de secreto de cliente para futuras referencias.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/value.png\" alt-text=\"Tarjeta de valor.\":::\n\n**Para agregar permisos de API para llamadas de nivel inferior**\n\n1. En **el panel Administrar** del bot, seleccione **Permisos de API**.\n1. Seleccione **Agregar un permiso** Aparece la ventana **Solicitar permisos de API**.\n1. Seleccione **API de Microsoft** y **seleccione Microsoft Graph**.\n1. Seleccione **Permisos de aplicación** y, a continuación, permisos.\n1. Agregue los permisos de usuario que la aplicación requiere a las API de nivel inferior, por ejemplo, `User.Read`.\n1. Seleccione **Agregar permisos**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/api-permissions.png\" alt-text=\"Agregar permisos de API.\"lightbox=\"assets/images/conversation-bot/api-permissions.png\":::\n\n**Para agregar un punto de conexión de mensajería**\n\n1. Vaya a la página **Inicio** del bot y seleccione **Configuración** en **Configuración** en el panel izquierdo.\n1. Ve a ngrok.\n1. Copie la dirección URL HTTPS (https a io) como se muestra en la siguiente imagen:\n    \n   :::image type=\"content\" source=\"../msteams-platform/assets/images/ngrok-url.png\" alt-text=\"ngrok HTTPS URL\":::\n   \n1. En **Punto de conexión de mensajería**, agregue la dirección URL HTTPS disponible desde ngrok y, al final de la dirección URL, agregue **/api/messages**.\n    \n    :::image type=\"content\" source=\"./assets/images/conversation-bot/messaging-endpoint.png\" alt-text=\"Punto de conexión de mensajería.\":::\n\n1. Seleccione **Aplicar**.\n\n**Para agregar el canal de Microsoft Teams**\n\n1. Ve a **Inicio**.\n1. En la sección **Recursos recientes** , abra el bot.\n1. Seleccione **Canales** en el panel izquierdo y seleccione **Microsoft Teams**. <img src=\"~/assets/images/bots/teamsicon.png\" alt=\"Teams icon\" width=\"20\"/> de la lista de canales disponibles.    \n    \n    :::image type=\"content\" source=\"~/assets/images/adaptive-cards/channel-teams.png\" alt-text=\"Selección de Teams en canales\":::\n\n1. Active la casilla para aceptar los términos de servicio y seleccione **Aceptar**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/terms-of-service.png\" alt-text=\"Términos de servicio.\":::\n\n1. Seleccione **Guardar**.\n\n    Ha configurado correctamente un bot en Azure Bot Service y ahora debe configurar la conexión de bot service.\n"
- title: Configuración de la conexión de bot service
  durationInMinutes: 1
  content: "Configure el ejemplo de bot para comprender cómo autenticar el bot de conversación en Microsoft Teams y crear el paquete de aplicación de Teams y cargarlo en la organización.\n\n1. Actualice appsettings.json en Visual Studio.\n1. Actualice manifest.json en Visual Studio y comprima en el archivo ZIP del Explorador de archivos.\n1. Ejecute la solución en Visual Studio.\n1. Cargue el bot en Teams.\n\n**Actualización de appsettings para el bot de conversación**\n\n1. Vaya al repositorio https://github.com/Microsoft/botbuilder-samples.git.\n1. Seleccione **Código** y seleccione la lista desplegable.\n1. Seleccione **Descargar ZIP**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/repo.png\" alt-text=\"Clonación de repositorios.\":::\n\n1. Asegúrese de tener en cuenta la ruta de acceso del repositorio que descargó.\n1. En la **Explorador de archivos**, vaya a **ejemplos de botbuilder-samples** >  > **csharp_dotnetcore** > **57.teams-conversation-bot**.\n1. Abra el archivo **appsettings.json** en Visual Studio y actualice la configuración del bot.\n\n    * Agregue el nombre del bot para `MicrosoftAppType`.\n    * Puede obtenerlo en la `MicrosoftAppId` página de configuración del bot. `MicrosoftAppPassword` es el valor del identificador de secreto de cliente que guardó anteriormente.\n    * Puede obtener o `MicrosoftAppTenantId` `UserId` desde el vínculo de la cuenta usada para iniciar sesión en Teams. Siga la ruta de acceso de la imagen para obtener el vínculo para `tenant id`:\n    \n        :::image type=\"content\" source=\"./assets/images/conversation-bot/teams-link-new.png\" alt-text=\"Ruta de acceso del identificador de inquilino en Teams.\":::\n\n        :::image type=\"content\" source=\"./assets/images/conversation-bot/tenant-id.png\" alt-text=\"Copia del vínculo de Teams.\":::\n\n        Copie el identificador de inquilino de la dirección URL.\n\n        :::image type=\"content\" source=\"./assets/images/conversation-bot/url-tenantid.png\" alt-text=\"TenantID.\":::\n\n1. Seleccione **Guardar**.    \n    \n    :::image type=\"content\" source=\"./assets/images/conversation-bot/appsettings.png\" alt-text=\"Appsettings Json.\":::\n\n**Para actualizar el manifiesto**\n\n1. En el **Explorador de archivos**, vaya a **botbuilder-samples** > **samples** > **csharp_dotnetcore** > **57.teams-conversation-bot** > **TeamsAppManifest**.\n1. Abra el archivo **manifest.json** en Visual Studio.\n1. En el archivo **manifest.json** , busque **{id}, {botId}** y agregue el identificador de aplicación de Microsoft.\n1. Agregue la dirección URL de ngrok en **validDomains** excluyendo y guardando `https://` .\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/manifest.png\" alt-text=\"Manifiesto.\":::\n\n1. Comprima el contenido de la carpeta **TeamsAppManifest** para crear **manifest.zip**.\n\n    > [!NOTE]\n    > `manifest.zip` no debe contener carpetas adicionales. Debe tener `manifest json` el archivo de origen, `color` el icono y `outline` el icono dentro de la carpeta zip.\n    > Ejecute la solución en Visual Studio y cargue el manifiesto en el inquilino de demostración para la organización o la cuenta de Teams.\n\n**Para ejecutar la solución en Visual Studio**\n\n1. Abra Visual Studio.\n1. Seleccione **Archivo** y seleccione **Abrir**.\n1. Seleccione **Proyecto o solución** para abrir el `.csproj` archivo desde el Explorador de archivos.\n1. Vaya a **ejemplos** >  **de botbuilder-samples** > **csharp_dotnetcore** > **57.teams-conversation-bot**.\n1. Seleccione `TeamsConversationBot.csproj` archivo y seleccione el bot en la lista **Proyectos de inicio** .\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/visual-studio.png\" alt-text=\"Depuración de Visual Studio.\":::\n\n1. Seleccione F5 para depurar. Recibirá una pantalla de confirmación cuando el bot esté listo.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/bot.png\" alt-text=\"Pantalla lista para bots.\":::\n\n**Para cargar la aplicación en Teams**\n\n1. Vaya a Teams.\n1. Para cargar **manifest.zip**, seleccione **Store > Manage your apps > Upload a custom app (Cargar una aplicación personalizada**) y abra **manifest.zip** desde el repositorio en Explorador de archivos.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/upload-manifest.png\" alt-text=\"Carga de manifiestos en Teams.\":::\n\n1. Seleccione **Agregar** para instalar el bot de conversación en Teams.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/add-app-teams.png\" alt-text=\"Agregar aplicación a Teams.\":::\n\n    Ahora puede interactuar con este bot.\n"
- title: Interacción con el bot de conversación
  durationInMinutes: 2
  content: >
    Puede interactuar con el bot en Teams enviándole un mensaje o seleccionando un comando de la lista de comandos. El bot responde a las siguientes cadenas:


    En el panel izquierdo de Teams, seleccione los puntos suspensivos ●●●y, a continuación, seleccione la aplicación en la lista. El bot muestra **sugerencias** como se indica a continuación:


    :::image type="content" source="./assets/images/conversation-bot/suggestions.png" alt-text="Tarjeta de sugerencias.":::


    | MentionMe    | Mostrar bienvenida   | MessageAllMembers |

    | --- | --- | --- |

    | :::image type="content" source="./assets/images/conversation-bot/mentionme-new.png" alt-text="Tarjeta Mentionme"lightbox="assets/images/conversation-bot/mentionme-new.png"::: | :::image type="content" source="./assets/images/conversation-bot/show-welcome-new.png" alt-text="Mostrar tarjeta de bienvenida"lightbox="assets/images/conversation-bot/show-welcome-new.png"::: | :::image type="content" source="./assets/images/conversation-bot/message-all-members-new.png" alt-text="Tarjeta MessageAllMembers"lightbox="assets/images/conversation-bot/message-all-members-new.png"::: |

    | **Resultado:** El bot responde al mensaje y menciona al usuario. | **Resultado:** El bot envía la tarjeta de bienvenida con la que puede interactuar. |  **Resultado:** El bot envía un mensaje uno a uno a cada miembro de la conversación actual. |

    | **Ámbitos válidos:** personal, chat en grupo, chat en equipo. | **Ámbitos válidos:** personal, chat en grupo, chat en equipo. |  **Ámbitos válidos:** personal, chat en grupo, chat en equipo. |


    Para seleccionar una opción de la lista de comandos, escriba **@TeamsConversationBot** en el área del mensaje de redacción y en **el texto ¿Qué puedo hacer?** encima del área de redacción.
- title: Desafío completo
  durationInMinutes: 1
  content: >
    ¿Se te ocurrió algo como esto?


    :::image type="content" source="./assets/images/conversation-bot/final-output.png" alt-text="Salida final."lightbox="assets/images/conversation-bot/final-output.png":::
- content: Ha completado el tutorial para empezar a trabajar con el bot de conversación para Microsoft Teams.
